(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[323],{20067:function(){},72061:function(){},30285:function(e,r,t){Promise.resolve().then(t.bind(t,56677))},56677:function(e,r,t){"use strict";t.d(r,{AdminPage:function(){return ev}});var a=t(57437),s=t(2265),l=t(16463),n=t(89172),i=t(41982),o=t(89733),d=t(36836),c=t(53429),m=t(97501);async function x(e,r){try{let t=new m.ZP({orientation:r.orientation||"portrait",unit:"mm",format:"a4"}),a="ar"===r.language,s=t.internal.pageSize.getWidth(),l=t.internal.pageSize.getHeight(),n=20;t.setFontSize(20),t.setTextColor(40,40,40),a?t.text(r.title,s-20,n,{align:"right"}):t.text(r.title,20,n),n+=15,r.subtitle&&(t.setFontSize(12),t.setTextColor(100,100,100),a?t.text(r.subtitle,s-20,n,{align:"right"}):t.text(r.subtitle,20,n),n+=10),t.setFontSize(10),t.setTextColor(120,120,120);let i=new Date().toLocaleDateString(a?"ar-SA":"en-US"),o=a?"تاريخ التقرير: ".concat(i):"Report Date: ".concat(i);a?t.text(o,s-20,n,{align:"right"}):t.text(o,20,n),n+=20,t.setFontSize(14),t.setTextColor(40,40,40);let d=a?"ملخص الإحصائيات":"Summary Statistics";a?t.text(d,s-20,n,{align:"right"}):t.text(d,20,n),n+=15;let c=[[a?"إجمالي الاختبارات":"Total Tests",e.totalTests.toString()],[a?"أنواع الاختبارات":"Test Types",Object.keys(e.testsByType).length.toString()],[a?"متوسط الاستخدام اليومي":"Daily Average Usage",Math.round(e.dailyUsage.reduce((e,r)=>e+r.count,0)/e.dailyUsage.length).toString()]];if(t.autoTable({startY:n,head:[[a?"المؤشر":"Metric",a?"القيمة":"Value"]],body:c,theme:"grid",styles:{fontSize:10,cellPadding:5,textColor:[40,40,40]},headStyles:{fillColor:[66,139,202],textColor:[255,255,255],fontStyle:"bold"},margin:{left:20,right:20},tableWidth:"auto"}),n=t.lastAutoTable.finalY+20,e.popularTests.length>0){t.setFontSize(14),t.setTextColor(40,40,40);let r=a?"الاختبارات الأكثر استخداماً":"Most Popular Tests";a?t.text(r,s-20,n,{align:"right"}):t.text(r,20,n),n+=15;let l=e.popularTests.map(r=>[r.name,r.count.toString(),"".concat((r.count/e.totalTests*100).toFixed(1),"%")]);t.autoTable({startY:n,head:[[a?"اسم الاختبار":"Test Name",a?"عدد الاستخدامات":"Usage Count",a?"النسبة المئوية":"Percentage"]],body:l,theme:"striped",styles:{fontSize:10,cellPadding:5,textColor:[40,40,40]},headStyles:{fillColor:[92,184,92],textColor:[255,255,255],fontStyle:"bold"},margin:{left:20,right:20}}),n=t.lastAutoTable.finalY+20}if(Object.keys(e.testsByType).length>0){n>l-80&&(t.addPage(),n=20),t.setFontSize(14),t.setTextColor(40,40,40);let r=a?"الاختبارات حسب النوع":"Tests by Type";a?t.text(r,s-20,n,{align:"right"}):t.text(r,20,n),n+=15;let i=Object.entries(e.testsByType).map(r=>{let[t,a]=r;return[t.charAt(0).toUpperCase()+t.slice(1),a.toString(),"".concat((a/e.totalTests*100).toFixed(1),"%")]});t.autoTable({startY:n,head:[[a?"نوع الاختبار":"Test Type",a?"العدد":"Count",a?"النسبة المئوية":"Percentage"]],body:i,theme:"grid",styles:{fontSize:10,cellPadding:5,textColor:[40,40,40]},headStyles:{fillColor:[240,173,78],textColor:[255,255,255],fontStyle:"bold"},margin:{left:20,right:20}})}let x=t.getNumberOfPages();for(let e=1;e<=x;e++){t.setPage(e),t.setFontSize(8),t.setTextColor(150,150,150);let r=a?"صفحة ".concat(e," من ").concat(x," - تم إنشاؤه بواسطة نظام اختبار الألوان"):"Page ".concat(e," of ").concat(x," - Generated by Color Testing System");a?t.text(r,s-20,l-10,{align:"right"}):t.text(r,20,l-10)}let g="".concat(r.title.replace(/\s+/g,"-").toLowerCase(),"-").concat(new Date().toISOString().split("T")[0],".pdf");t.save(g)}catch(e){throw console.error("Error generating PDF report:",e),e}}t(40520);var g=t(80039),u=t(41300),h=t(53705),p=t(81961),y=t(84351);function b(e){let{lang:r}=e,[t,l]=(0,s.useState)({startDate:"",endDate:"",testType:"all",reportType:"usage"}),[i,d]=(0,s.useState)(null),[c,m]=(0,s.useState)(!1),[b,f]=(0,s.useState)(!1);(0,n.nZ)(r);let j=[{id:"all",name:"ar"===r?"جميع الاختبارات":"All Tests"},{id:"marquis",name:"Marquis Test"},{id:"mecke",name:"Mecke Test"},{id:"ferric-sulfate",name:"Ferric Sulfate Test"},{id:"liebermann",name:"Liebermann Test"},{id:"simon",name:"Simon Test"},{id:"ehrlich",name:"Ehrlich Test"}],v=[{id:"usage",name:"ar"===r?"تقرير الاستخدام":"Usage Report"},{id:"analytics",name:"ar"===r?"تقرير التحليلات":"Analytics Report"},{id:"summary",name:"ar"===r?"تقرير ملخص":"Summary Report"}],N=async()=>{m(!0);try{await new Promise(e=>setTimeout(e,2e3)),d({totalTests:1247,testsByType:{marquis:342,mecke:298,"ferric-sulfate":187,liebermann:156,simon:134,ehrlich:130},dailyUsage:[{date:"2025-01-01",count:45},{date:"2025-01-02",count:52},{date:"2025-01-03",count:38},{date:"2025-01-04",count:67},{date:"2025-01-05",count:41}],popularTests:[{testId:"marquis",count:342,name:"Marquis Test"},{testId:"mecke",count:298,name:"Mecke Test"},{testId:"ferric-sulfate",count:187,name:"Ferric Sulfate Test"}]})}catch(e){console.error("Error generating report:",e)}finally{m(!1)}},w=async()=>{if(i){f(!0);try{var e,a;let s="ar"===r?"تقرير ".concat((null===(e=v.find(e=>e.id===t.reportType))||void 0===e?void 0:e.name)||"عام"):"".concat((null===(a=v.find(e=>e.id===t.reportType))||void 0===a?void 0:a.name)||"General"," Report"),l=t.startDate&&t.endDate?"".concat(t.startDate," - ").concat(t.endDate):void 0;await x(i,{title:s,subtitle:l,language:r,orientation:"portrait"})}catch(e){console.error("Error exporting PDF:",e),alert("ar"===r?"خطأ في تصدير PDF":"Error exporting PDF")}finally{f(!1)}}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3 rtl:space-x-reverse",children:[(0,a.jsx)(g.Z,{className:"h-6 w-6 text-primary-600"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"ar"===r?"نظام التقارير":"Reports System"})]})}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-600 p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4",children:"ar"===r?"فلاتر التقرير":"Report Filters"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"ar"===r?"تاريخ البداية":"Start Date"}),(0,a.jsx)("input",{type:"date",value:t.startDate,onChange:e=>l(r=>({...r,startDate:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"ar"===r?"تاريخ النهاية":"End Date"}),(0,a.jsx)("input",{type:"date",value:t.endDate,onChange:e=>l(r=>({...r,endDate:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"ar"===r?"نوع الاختبار":"Test Type"}),(0,a.jsx)("select",{value:t.testType,onChange:e=>l(r=>({...r,testType:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100",children:j.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"ar"===r?"نوع التقرير":"Report Type"}),(0,a.jsx)("select",{value:t.reportType,onChange:e=>l(r=>({...r,reportType:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100",children:v.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-3 mt-6",children:[(0,a.jsxs)(o.z,{onClick:N,loading:c,disabled:c,className:"flex items-center space-x-2 rtl:space-x-reverse",children:[(0,a.jsx)(u.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"ar"===r?"إنشاء التقرير":"Generate Report"})]}),i&&(0,a.jsxs)(o.z,{onClick:w,loading:b,disabled:b,variant:"outline",className:"flex items-center space-x-2 rtl:space-x-reverse",children:[(0,a.jsx)(h.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"ar"===r?"تصدير PDF":"Export PDF"})]})]})]}),i&&(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-600 p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-6",children:"ar"===r?"نتائج التقرير":"Report Results"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,a.jsx)("div",{className:"bg-primary-50 dark:bg-primary-950 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-primary-600 dark:text-primary-400",children:"ar"===r?"إجمالي الاختبارات":"Total Tests"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-primary-900 dark:text-primary-100",children:i.totalTests.toLocaleString()})]}),(0,a.jsx)(g.Z,{className:"h-8 w-8 text-primary-600"})]})}),(0,a.jsx)("div",{className:"bg-green-50 dark:bg-green-950 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-green-600 dark:text-green-400",children:"ar"===r?"أنواع الاختبارات":"Test Types"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-green-900 dark:text-green-100",children:Object.keys(i.testsByType).length})]}),(0,a.jsx)(p.Z,{className:"h-8 w-8 text-green-600"})]})}),(0,a.jsx)("div",{className:"bg-blue-50 dark:bg-blue-950 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"ar"===r?"متوسط يومي":"Daily Average"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:Math.round(i.dailyUsage.reduce((e,r)=>e+r.count,0)/i.dailyUsage.length)})]}),(0,a.jsx)(y.Z,{className:"h-8 w-8 text-blue-600"})]})})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h4",{className:"text-md font-medium text-gray-900 dark:text-gray-100 mb-4",children:"ar"===r?"الاختبارات الأكثر استخداماً":"Most Popular Tests"}),(0,a.jsx)("div",{className:"space-y-3",children:i.popularTests.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 rtl:space-x-reverse",children:[(0,a.jsx)("span",{className:"flex items-center justify-center w-6 h-6 bg-primary-100 dark:bg-primary-900 text-primary-600 text-sm font-medium rounded-full",children:t+1}),(0,a.jsx)("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:e.name})]}),(0,a.jsxs)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.count," ","ar"===r?"استخدام":"uses"]})]},e.testId))})]})]})]})}var f=t(85130),j=t(11853),v=t(33009),N=t(71321),w=t(76218),k=t(56149),_=t(1243);function S(e){let{lang:r}=e,[t,l]=(0,s.useState)({status:"healthy",totalRecords:1247,lastBackup:"2025-01-10 14:30:00",size:"2.4 MB",version:"2.0.0",uptime:"15 days, 6 hours"}),[i,d]=(0,s.useState)(!1),[c,m]=(0,s.useState)(!1),[x,g]=(0,s.useState)(!1),[u,h]=(0,s.useState)(!1);(0,n.nZ)(r);let p=async()=>{m(!0);try{await new Promise(e=>setTimeout(e,3e3));let e={timestamp:new Date().toISOString(),version:t.version,records:t.totalRecords,data:"Mock backup data..."},r=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),a=URL.createObjectURL(r),s=document.createElement("a");s.href=a,s.download="database-backup-".concat(new Date().toISOString().split("T")[0],".json"),document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(a),l(e=>({...e,lastBackup:new Date().toLocaleString()}))}catch(e){console.error("Error creating backup:",e)}finally{m(!1)}},y=async e=>{g(!0);try{await new Promise(e=>setTimeout(e,4e3)),console.log("Restoring from file:",e.name),alert("ar"===r?"تم استعادة قاعدة البيانات بنجاح":"Database restored successfully")}catch(e){console.error("Error restoring database:",e),alert("ar"===r?"خطأ في استعادة قاعدة البيانات":"Error restoring database")}finally{g(!1)}},b=async()=>{h(!0);try{await new Promise(e=>setTimeout(e,5e3)),l(e=>({...e,status:"healthy",size:"2.2 MB"})),alert("ar"===r?"تم تشغيل صيانة قاعدة البيانات بنجاح":"Database maintenance completed successfully")}catch(e){console.error("Error running maintenance:",e)}finally{h(!1)}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3 rtl:space-x-reverse",children:[(0,a.jsx)(N.Z,{className:"h-6 w-6 text-primary-600"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"ar"===r?"إدارة قاعدة البيانات":"Database Management"})]})}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-600 p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4",children:"ar"===r?"حالة قاعدة البيانات":"Database Status"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"ar"===r?"الحالة":"Status"}),(0,a.jsxs)("div",{className:"inline-flex items-center space-x-2 rtl:space-x-reverse px-3 py-2 rounded-lg ".concat((e=>{switch(e){case"healthy":return"text-green-600 bg-green-50 dark:bg-green-950";case"warning":return"text-yellow-600 bg-yellow-50 dark:bg-yellow-950";case"error":return"text-red-600 bg-red-50 dark:bg-red-950";default:return"text-gray-600 bg-gray-50 dark:bg-gray-950"}})(t.status)),children:[(e=>{switch(e){case"healthy":return(0,a.jsx)(f.Z,{className:"h-5 w-5"});case"warning":case"error":return(0,a.jsx)(j.Z,{className:"h-5 w-5"});default:return(0,a.jsx)(v.Z,{className:"h-5 w-5"})}})(t.status),(0,a.jsxs)("span",{className:"font-medium",children:["healthy"===t.status&&("ar"===r?"سليمة":"Healthy"),"warning"===t.status&&("ar"===r?"تحذير":"Warning"),"error"===t.status&&("ar"===r?"خطأ":"Error")]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"ar"===r?"إجمالي السجلات":"Total Records"}),(0,a.jsx)("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:t.totalRecords.toLocaleString()})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"ar"===r?"حجم قاعدة البيانات":"Database Size"}),(0,a.jsx)("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:t.size})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"ar"===r?"آخر نسخة احتياطية":"Last Backup"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:t.lastBackup})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"ar"===r?"الإصدار":"Version"}),(0,a.jsx)("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:t.version})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"ar"===r?"وقت التشغيل":"Uptime"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:t.uptime})]})]})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-600 p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4",children:"ar"===r?"عمليات قاعدة البيانات":"Database Operations"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(w.Z,{className:"h-12 w-12 text-blue-600 mx-auto mb-3"}),(0,a.jsx)("h4",{className:"font-medium text-gray-900 dark:text-gray-100",children:"ar"===r?"إنشاء نسخة احتياطية":"Create Backup"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"ar"===r?"إنشاء نسخة احتياطية من قاعدة البيانات الحالية":"Create a backup of the current database"})]}),(0,a.jsx)(o.z,{onClick:p,loading:c,disabled:c,className:"w-full",children:"ar"===r?"إنشاء نسخة احتياطية":"Create Backup"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(k.Z,{className:"h-12 w-12 text-green-600 mx-auto mb-3"}),(0,a.jsx)("h4",{className:"font-medium text-gray-900 dark:text-gray-100",children:"ar"===r?"استعادة قاعدة البيانات":"Restore Database"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"ar"===r?"استعادة قاعدة البيانات من نسخة احتياطية":"Restore database from backup file"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("input",{type:"file",accept:".json",onChange:e=>{var r;let t=null===(r=e.target.files)||void 0===r?void 0:r[0];t&&y(t)},className:"hidden",id:"restore-file"}),(0,a.jsx)(o.z,{onClick:()=>{var e;return null===(e=document.getElementById("restore-file"))||void 0===e?void 0:e.click()},loading:x,disabled:x,variant:"outline",className:"w-full",children:"ar"===r?"اختيار ملف الاستعادة":"Choose Restore File"})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(_.Z,{className:"h-12 w-12 text-orange-600 mx-auto mb-3"}),(0,a.jsx)("h4",{className:"font-medium text-gray-900 dark:text-gray-100",children:"ar"===r?"صيانة قاعدة البيانات":"Database Maintenance"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"ar"===r?"تشغيل مهام الصيانة وتحسين الأداء":"Run maintenance tasks and optimize performance"})]}),(0,a.jsx)(o.z,{onClick:b,loading:u,disabled:u,variant:"outline",className:"w-full",children:"ar"===r?"تشغيل الصيانة":"Run Maintenance"})]})]})]}),(0,a.jsx)("div",{className:"bg-yellow-50 dark:bg-yellow-950 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3 rtl:space-x-reverse",children:[(0,a.jsx)(j.Z,{className:"h-5 w-5 text-yellow-600 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:[(0,a.jsx)("p",{className:"font-medium mb-1",children:"ar"===r?"تحذير مهم:":"Important Warning:"}),(0,a.jsx)("p",{children:"ar"===r?"تأكد من إنشاء نسخة احتياطية قبل تشغيل عمليات الاستعادة أو الصيانة. هذه العمليات قد تؤثر على البيانات الحالية.":"Make sure to create a backup before running restore or maintenance operations. These operations may affect current data."})]})]})})]})}var C=t(27800);let T=["test_id","test_name","test_name_ar","color_result","color_result_ar","color_hex","possible_substance","possible_substance_ar","confidence_level","category"],E=["test_id","test_name","color_result","color_hex","possible_substance"];async function I(e){return new Promise((r,t)=>{let a=new FileReader;a.onload=a=>{try{var s;let t=new Uint8Array(null===(s=a.target)||void 0===s?void 0:s.result),l=C.ij(t,{type:"array"}),n=l.SheetNames[0],i=l.Sheets[n],o=C.P6.sheet_to_json(i,{header:1});if(0===o.length)throw Error("Empty file");let d=o[0]||[],c=o.slice(1),m={headers:d,rows:c,fileName:e.name,fileSize:function(e){if(0===e)return"0 Bytes";let r=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,r)).toFixed(2))+" "+["Bytes","KB","MB","GB"][r]}(e.size),rowCount:c.length};r(m)}catch(e){t(e)}},a.onerror=()=>t(Error("Failed to read file")),a.readAsArrayBuffer(e)})}function D(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"export";try{let t=C.P6.book_new(),a=C.P6.json_to_sheet(e);C.P6.book_append_sheet(t,a,"Data");let s=C.cW(t,{bookType:"xlsx",type:"array"}),l=new Blob([s],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),n=URL.createObjectURL(l),i=document.createElement("a");i.href=n,i.download="".concat(r,".xlsx"),document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(n)}catch(e){throw console.error("Error exporting to Excel:",e),e}}function P(){return[{test_id:"marquis-test",test_name:"Marquis Test",test_name_ar:"اختبار ماركيز",color_result:"Purple to Violet",color_result_ar:"بنفسجي إلى بنفسجي داكن",color_hex:"#800080",possible_substance:"MDMA, Amphetamines",possible_substance_ar:"إم دي إم إيه، الأمفيتامينات",confidence_level:"85",category:"basic"},{test_id:"mecke-test",test_name:"Mecke Test",test_name_ar:"اختبار ميكي",color_result:"Blue to Green",color_result_ar:"أزرق إلى أخضر",color_hex:"#008B8B",possible_substance:"Cocaine, Heroin",possible_substance_ar:"الكوكايين، الهيروين",confidence_level:"90",category:"basic"},{test_id:"ferric-sulfate-test",test_name:"Ferric Sulfate Test",test_name_ar:"اختبار كبريتات الحديد",color_result:"Orange to Brown",color_result_ar:"برتقالي إلى بني",color_hex:"#FFA500",possible_substance:"Morphine, Heroin",possible_substance_ar:"المورفين، الهيروين",confidence_level:"80",category:"advanced"}]}function A(){D(P(),"chemical-tests-template")}var Z=t(1704),z=t(69012),O=t(39519);function M(e){let{lang:r}=e,[t,l]=(0,s.useState)(null),[i,d]=(0,s.useState)([]),[c,m]=(0,s.useState)(!1),[x,g]=(0,s.useState)(!1),[u,p]=(0,s.useState)(!1),[y,b]=(0,s.useState)(!1);(0,n.nZ)(r);let v=async e=>{m(!0),d([]);try{let t=await I(e),a=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en",t=[];return E.forEach(a=>{e.headers.includes(a)||t.push({row:0,column:a,message:"ar"===r?'العمود المطلوب "'.concat(a,'" غير موجود'):'Required column "'.concat(a,'" is missing')})}),e.rows.forEach((a,s)=>{var l,n;let i=s+1;a.length!==e.headers.length&&t.push({row:i,column:"general",message:"ar"===r?"عدد الأعمدة غير متطابق":"Column count mismatch"}),E.forEach(s=>{let l=e.headers.indexOf(s);if(-1!==l){let e=a[l];e&&""!==e.toString().trim()||t.push({row:i,column:s,message:"ar"===r?'الحقل المطلوب "'.concat(s,'" فارغ'):'Required field "'.concat(s,'" is empty')})}});let o=e.headers.indexOf("color_hex");if(-1!==o){let e=a[o];e&&(l=e.toString(),!/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(l))&&t.push({row:i,column:"color_hex",message:"ar"===r?"كود اللون غير صحيح (يجب أن يكون بصيغة #RRGGBB)":"Invalid hex color code (must be in #RRGGBB format)"})}let d=e.headers.indexOf("test_id");if(-1!==d){let e=a[d];e&&(n=e.toString(),!/^[a-zA-Z0-9-_]+$/.test(n))&&t.push({row:i,column:"test_id",message:"ar"===r?"معرف الاختبار غير صحيح (يجب أن يحتوي على أحرف وأرقام وشرطات فقط)":"Invalid test ID (must contain only letters, numbers, and hyphens)"})}}),t}(t,r);d(a),l(t),b(!0)}catch(e){console.error("Error reading file:",e),alert("ar"===r?"خطأ في قراءة الملف":"Error reading file")}finally{m(!1)}},N=async()=>{if(t&&!(i.length>0)){g(!0);try{let e=JSON.parse(localStorage.getItem("chemical_tests")||"[]");!function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"backup";try{let t={timestamp:new Date().toISOString(),version:"2.0.0",data:e},a=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),s=URL.createObjectURL(a),l=document.createElement("a");l.href=s,l.download="".concat(r,"-").concat(new Date().toISOString().split("T")[0],".json"),document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(s)}catch(e){throw console.error("Error creating backup:",e),e}}(e,"pre-import-backup");let a=function(e){let r=[];return e.rows.forEach(t=>{let a={};e.headers.forEach((e,r)=>{a[e]=t[r]||""}),a.id=Math.random().toString(36).substr(2,9),a.created_at=new Date().toISOString(),a.updated_at=new Date().toISOString(),r.push(a)}),r}(t),s=[...e,...a];localStorage.setItem("chemical_tests",JSON.stringify(s)),alert("ar"===r?"تم استيراد ".concat(t.rowCount," سجل بنجاح"):"Successfully imported ".concat(t.rowCount," records")),l(null),b(!1),d([])}catch(e){console.error("Error importing data:",e),alert("ar"===r?"خطأ في استيراد البيانات":"Error importing data")}finally{g(!1)}}},w=async()=>{p(!0);try{let e=JSON.parse(localStorage.getItem("chemical_tests")||"[]"),r=e.length>0?e:P();D(r,"chemical-tests-export-".concat(new Date().toISOString().split("T")[0]))}catch(e){console.error("Error exporting data:",e),alert("ar"===r?"خطأ في تصدير البيانات":"Error exporting data")}finally{p(!1)}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3 rtl:space-x-reverse",children:[(0,a.jsx)(Z.Z,{className:"h-6 w-6 text-primary-600"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"ar"===r?"إدارة ملفات Excel":"Excel File Management"})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-600 p-6",children:[(0,a.jsxs)("div",{className:"text-center mb-6",children:[(0,a.jsx)(z.Z,{className:"h-12 w-12 text-blue-600 mx-auto mb-3"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"ar"===r?"استيراد البيانات":"Import Data"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"ar"===r?"رفع ملف Excel لاستيراد البيانات إلى قاعدة البيانات":"Upload Excel file to import data into database"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("input",{type:"file",accept:".xlsx,.xls,.csv",onChange:e=>{var r;let t=null===(r=e.target.files)||void 0===r?void 0:r[0];t&&v(t)},className:"hidden",id:"excel-upload"}),(0,a.jsx)(o.z,{onClick:()=>{var e;return null===(e=document.getElementById("excel-upload"))||void 0===e?void 0:e.click()},loading:c,disabled:c,className:"w-full",children:"ar"===r?"اختيار ملف Excel":"Choose Excel File"})]}),(0,a.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 dark:text-gray-100",children:"ar"===r?"التنسيق المطلوب:":"Expected Format:"}),(0,a.jsx)(o.z,{onClick:A,size:"sm",variant:"outline",className:"text-xs",children:"ar"===r?"تحميل نموذج":"Download Template"})]}),(0,a.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-400 space-y-1",children:T.map(e=>(0,a.jsx)("div",{className:"font-mono",children:e},e))})]})]})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-600 p-6",children:[(0,a.jsxs)("div",{className:"text-center mb-6",children:[(0,a.jsx)(h.Z,{className:"h-12 w-12 text-green-600 mx-auto mb-3"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"ar"===r?"تصدير البيانات":"Export Data"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"ar"===r?"تصدير البيانات الحالية إلى ملف Excel":"Export current data to Excel file"})]}),(0,a.jsx)(o.z,{onClick:w,loading:u,disabled:u,className:"w-full",children:"ar"===r?"تصدير إلى Excel":"Export to Excel"})]})]}),t&&y&&(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-600 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"ar"===r?"معاينة الملف":"File Preview"}),(0,a.jsx)(o.z,{onClick:()=>b(!1),variant:"outline",size:"sm",children:"ar"===r?"إغلاق":"Close"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"ar"===r?"اسم الملف":"File Name"}),(0,a.jsx)("p",{className:"text-sm text-gray-900 dark:text-gray-100",children:t.fileName})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"ar"===r?"حجم الملف":"File Size"}),(0,a.jsx)("p",{className:"text-sm text-gray-900 dark:text-gray-100",children:t.fileSize})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"ar"===r?"عدد الصفوف":"Row Count"}),(0,a.jsx)("p",{className:"text-sm text-gray-900 dark:text-gray-100",children:t.rowCount})]})]}),(0,a.jsx)("div",{className:"mb-6",children:0===i.length?(0,a.jsxs)("div",{className:"flex items-center space-x-2 rtl:space-x-reverse text-green-600",children:[(0,a.jsx)(f.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"font-medium",children:"ar"===r?"الملف صالح للاستيراد":"File is valid for import"})]}):(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 rtl:space-x-reverse text-red-600",children:[(0,a.jsx)(O.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"font-medium",children:"ar"===r?"تم العثور على ".concat(i.length," خطأ"):"Found ".concat(i.length," validation errors")})]}),(0,a.jsx)("div",{className:"bg-red-50 dark:bg-red-950 rounded-lg p-4 max-h-40 overflow-y-auto",children:i.map((e,t)=>(0,a.jsxs)("div",{className:"text-sm text-red-700 dark:text-red-300",children:["ar"===r?"صف":"Row"," ",e.row,", ","ar"===r?"عمود":"Column"," ",e.column,": ",e.message]},t))})]})}),(0,a.jsxs)("div",{className:"overflow-x-auto mb-6",children:[(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,a.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,a.jsx)("tr",{children:t.headers.map((e,r)=>(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:e},r))})}),(0,a.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:t.rows.slice(0,5).map((e,r)=>(0,a.jsx)("tr",{children:e.map((e,r)=>(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:e},r))},r))})]}),t.rows.length>5&&(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2 text-center",children:"ar"===r?"... و ".concat(t.rows.length-5," صف إضافي"):"... and ".concat(t.rows.length-5," more rows")})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 rtl:space-x-reverse",children:[(0,a.jsx)(o.z,{onClick:()=>b(!1),variant:"outline",children:"ar"===r?"إلغاء":"Cancel"}),(0,a.jsx)(o.z,{onClick:N,loading:x,disabled:x||i.length>0,children:"ar"===r?"استيراد البيانات":"Import Data"})]})]}),(0,a.jsx)("div",{className:"bg-blue-50 dark:bg-blue-950 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3 rtl:space-x-reverse",children:[(0,a.jsx)(j.Z,{className:"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:[(0,a.jsx)("p",{className:"font-medium mb-1",children:"ar"===r?"تعليمات مهمة:":"Important Instructions:"}),(0,a.jsxs)("ul",{className:"space-y-1 list-disc list-inside",children:[(0,a.jsx)("li",{children:"ar"===r?"تأكد من أن ملف Excel يحتوي على جميع الأعمدة المطلوبة":"Make sure Excel file contains all required columns"}),(0,a.jsx)("li",{children:"ar"===r?"سيتم إنشاء نسخة احتياطية تلقائياً قبل الاستيراد":"Automatic backup will be created before import"}),(0,a.jsx)("li",{children:"ar"===r?"الملفات المدعومة: .xlsx, .xls, .csv":"Supported formats: .xlsx, .xls, .csv"})]})]})]})})]})}var L=t(78357),R=t(84380),U=t(62047),F=t(63002),B=t(44872),V=t(52985),q=t(58900),J=t(12560),H=t(74458),G=t(88726);function K(e){let{lang:r}=e,[t,l]=(0,s.useState)([]),[i,d]=(0,s.useState)([]),[c,m]=(0,s.useState)(!0),[x,u]=(0,s.useState)(""),[h,y]=(0,s.useState)("all"),[b,f]=(0,s.useState)(null),[j,N]=(0,s.useState)(!1),[w,k]=(0,s.useState)(!1),[_,S]=(0,s.useState)(null),[C,T]=(0,s.useState)({method_name:"",method_name_ar:"",description:"",description_ar:"",category:"basic",safety_level:"medium",preparation_time:5,icon:"BeakerIcon",color_primary:"#8B5CF6"}),[E,I]=(0,s.useState)({total_chemical_tests:0,total_color_tests:0,unique_substances:0,unique_colors:0});(0,n.nZ)(r),(0,s.useEffect)(()=>{D()},[]);let D=async()=>{try{m(!0);let[e,r]=await Promise.all([H.kS.getAll(),H.HR.getAll()]);l(e),d(r);let t=new Set,a=new Set;r.forEach(e=>{e.possible_substance&&t.add(e.possible_substance),e.color_result&&a.add(e.color_result)}),I({total_chemical_tests:e.length,total_color_tests:r.length,unique_substances:t.size,unique_colors:a.size}),console.log("✅ Loaded tests from Firebase:",{chemical:e.length,color:r.length})}catch(e){console.error("Error loading tests from Firebase:",e),G.ZP.error("خطأ في تحميل الاختبارات | Error loading tests")}finally{m(!1)}},P=e=>{T({method_name:e.method_name,method_name_ar:e.method_name_ar,description:e.description,description_ar:e.description_ar,category:e.category,safety_level:e.safety_level,preparation_time:e.preparation_time,icon:e.icon,color_primary:e.color_primary,prepare:e.prepare,prepare_ar:e.prepare_ar,test_type:e.test_type,test_number:e.test_number,reference:e.reference}),S(e),k(!0)},A=async()=>{try{if(!C.method_name||!C.method_name_ar){G.ZP.error("يرجى ملء جميع الحقول المطلوبة | Please fill all required fields");return}let e={...C,created_at:(null==_?void 0:_.created_at)||new Date().toISOString()};_?(await H.kS.update(_.id,e),G.ZP.success("تم تحديث الاختبار بنجاح | Test updated successfully")):(await H.kS.add(e),G.ZP.success("تم إضافة الاختبار بنجاح | Test added successfully")),N(!1),k(!1),D()}catch(e){console.error("Error saving test:",e),G.ZP.error("خطأ في حفظ الاختبار | Error saving test")}},Z=async e=>{if(confirm("ar"===r?"هل أنت متأكد من حذف هذا الاختبار؟":"Are you sure you want to delete this test?"))try{await H.kS.delete(e.id),G.ZP.success("تم حذف الاختبار بنجاح | Test deleted successfully"),D()}catch(e){console.error("Error deleting test:",e),G.ZP.error("خطأ في حذف الاختبار | Error deleting test")}},z=e=>{f(b===e?null:e)},O=async()=>{await D(),G.ZP.success("ar"===r?"تم تحديث البيانات":"Data refreshed")},M=t.filter(e=>{let r=""===x||e.method_name.toLowerCase().includes(x.toLowerCase())||e.method_name_ar.includes(x)||e.description.toLowerCase().includes(x.toLowerCase())||e.description_ar.includes(x),t="all"===h||e.category===h;return r&&t});return c?(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-foreground",children:"ar"===r?"إدارة الاختبارات الكيميائية":"Chemical Tests Management"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"ar"===r?"عرض وإدارة الاختبارات المستخرجة من النتائج اللونية":"View and manage tests extracted from color results"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[(0,a.jsxs)(o.z,{onClick:()=>{T({method_name:"",method_name_ar:"",description:"",description_ar:"",category:"basic",safety_level:"medium",preparation_time:5,icon:"BeakerIcon",color_primary:"#8B5CF6"}),S(null),N(!0)},className:"flex items-center space-x-2 rtl:space-x-reverse",children:[(0,a.jsx)(L.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"ar"===r?"إضافة اختبار جديد":"Add New Test"})]}),(0,a.jsxs)(o.z,{onClick:O,variant:"outline",className:"flex items-center space-x-2 rtl:space-x-reverse",children:[(0,a.jsx)(g.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"ar"===r?"تحديث البيانات":"Refresh Data"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(R.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"ar"===r?"البحث في الاختبارات والمواد...":"Search tests and substances...",value:x,onChange:e=>u(e.target.value),className:"w-full pl-10 pr-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(p.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,a.jsxs)("select",{value:h,onChange:e=>y(e.target.value),className:"w-full pl-10 pr-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500",children:[(0,a.jsx)("option",{value:"all",children:"ar"===r?"جميع الفئات":"All Categories"}),(0,a.jsx)("option",{value:"basic",children:"ar"===r?"أساسي":"Basic"}),(0,a.jsx)("option",{value:"advanced",children:"ar"===r?"متقدم":"Advanced"}),(0,a.jsx)("option",{value:"specialized",children:"ar"===r?"متخصص":"Specialized"})]})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(U.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,a.jsx)("div",{className:"w-full pl-10 pr-3 py-2 border border-border rounded-lg bg-gray-50 text-gray-600",children:"ar"===r?"".concat(M.length," اختبار"):"".concat(M.length," tests")})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-border",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[(0,a.jsx)(F.Z,{className:"h-5 w-5 text-primary-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:"ar"===r?"الاختبارات الكيميائية":"Chemical Tests"})]}),(0,a.jsx)("p",{className:"text-2xl font-bold text-foreground mt-1",children:E.total_chemical_tests})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-border",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[(0,a.jsx)(U.Z,{className:"h-5 w-5 text-blue-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:"ar"===r?"اختبارات الألوان":"Color Tests"})]}),(0,a.jsx)("p",{className:"text-2xl font-bold text-foreground mt-1",children:E.total_color_tests})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-border",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full bg-green-500"}),(0,a.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:"ar"===r?"المواد الفريدة":"Unique Substances"})]}),(0,a.jsx)("p",{className:"text-2xl font-bold text-foreground mt-1",children:E.unique_substances})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-border",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[(0,a.jsx)(B.Z,{className:"h-5 w-5 text-purple-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:"ar"===r?"الألوان الفريدة":"Unique Colors"})]}),(0,a.jsx)("p",{className:"text-2xl font-bold text-foreground mt-1",children:E.unique_colors})]})]}),(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-border overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"ar"===r?"الاختبار":"Test"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"ar"===r?"الفئة":"Category"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"ar"===r?"مستوى الأمان":"Safety Level"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"ar"===r?"وقت التحضير":"Prep Time"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"ar"===r?"الإجراءات":"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:M.map(e=>(0,a.jsxs)(s.Fragment,{children:[(0,a.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3 rtl:space-x-reverse",children:[(0,a.jsx)("div",{className:"h-5 w-5 rounded-full flex items-center justify-center text-white text-xs",style:{backgroundColor:e.color_primary},children:(0,a.jsx)(F.Z,{className:"h-3 w-3"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-foreground",children:"ar"===r?e.method_name_ar:e.method_name}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"ar"===r?e.description_ar:e.description})]})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full border ".concat("basic"===e.category?"bg-green-100 text-green-800 border-green-200":"advanced"===e.category?"bg-blue-100 text-blue-800 border-blue-200":"specialized"===e.category?"bg-purple-100 text-purple-800 border-purple-200":"bg-gray-100 text-gray-800 border-gray-200"),children:"ar"===r?"basic"===e.category?"أساسي":"advanced"===e.category?"متقدم":"specialized"===e.category?"متخصص":"غير محدد":e.category||"Unspecified"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full border ".concat("low"===e.safety_level?"bg-green-100 text-green-800 border-green-200":"medium"===e.safety_level?"bg-yellow-100 text-yellow-800 border-yellow-200":"high"===e.safety_level?"bg-orange-100 text-orange-800 border-orange-200":"extreme"===e.safety_level?"bg-red-100 text-red-800 border-red-200":"bg-gray-100 text-gray-800 border-gray-200"),children:"ar"===r?"low"===e.safety_level?"منخفض":"medium"===e.safety_level?"متوسط":"high"===e.safety_level?"عالي":"extreme"===e.safety_level?"خطر شديد":"غير محدد":e.safety_level||"Unspecified"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[(0,a.jsx)(v.Z,{className:"h-4 w-4 text-gray-400"}),(0,a.jsx)("span",{className:"text-sm font-medium text-foreground",children:e.preparation_time}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"ar"===r?"دقيقة":"min"})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[(0,a.jsx)(o.z,{variant:"ghost",size:"sm",onClick:()=>z(e.id),className:"text-blue-600 hover:text-blue-700",children:(0,a.jsx)(V.Z,{className:"h-4 w-4"})}),(0,a.jsx)(o.z,{variant:"ghost",size:"sm",onClick:()=>P(e),className:"text-green-600 hover:text-green-700",children:(0,a.jsx)(q.Z,{className:"h-4 w-4"})}),(0,a.jsx)(o.z,{variant:"ghost",size:"sm",onClick:()=>Z(e),className:"text-red-600 hover:text-red-700",children:(0,a.jsx)(J.Z,{className:"h-4 w-4"})})]})})]}),b===e.id&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:5,className:"px-6 py-4 bg-gray-50 dark:bg-gray-700",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-foreground",children:"ar"===r?"تفاصيل الاختبار:":"Test Details:"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-border",children:[(0,a.jsx)("h5",{className:"text-sm font-semibold text-foreground mb-2",children:"ar"===r?"معلومات الاختبار:":"Test Information:"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"ar"===r?"الاسم:":"Name:"})," ","ar"===r?e.method_name_ar:e.method_name]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"ar"===r?"الوصف:":"Description:"})," ","ar"===r?e.description_ar:e.description]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"ar"===r?"الفئة:":"Category:"})," ",e.category]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"ar"===r?"مستوى الأمان:":"Safety Level:"})," ",e.safety_level]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"ar"===r?"وقت التحضير:":"Preparation Time:"})," ",e.preparation_time," ","ar"===r?"دقيقة":"minutes"]})]})]}),e.prepare&&(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-border",children:[(0,a.jsx)("h5",{className:"text-sm font-semibold text-foreground mb-2",children:"ar"===r?"خطوات التحضير:":"Preparation Steps:"}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground whitespace-pre-line",children:"ar"===r&&e.prepare_ar||e.prepare})]})]}),e.reference&&(0,a.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:[(0,a.jsx)("h5",{className:"text-sm font-semibold text-blue-900 dark:text-blue-100 mb-2",children:"ar"===r?"المرجع العلمي:":"Scientific Reference:"}),(0,a.jsx)("div",{className:"text-sm text-blue-800 dark:text-blue-200 font-mono",children:e.reference})]})]})})})]},e.id))})]})})}),0===M.length&&!c&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(F.Z,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,a.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-gray-100",children:"ar"===r?"لا توجد اختبارات":"No tests found"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"ar"===r?"لم يتم العثور على اختبارات تطابق معايير البحث":"No tests match the search criteria"})]}),(j||w)&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-foreground mb-4",children:_?"ar"===r?"تعديل الاختبار":"Edit Test":"ar"===r?"إضافة اختبار جديد":"Add New Test"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-foreground mb-1",children:"ar"===r?"اسم الاختبار (إنجليزي)":"Test Name (English)"}),(0,a.jsx)("input",{type:"text",value:C.method_name,onChange:e=>T({...C,method_name:e.target.value}),className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"Enter test name in English"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-foreground mb-1",children:"ar"===r?"اسم الاختبار (عربي)":"Test Name (Arabic)"}),(0,a.jsx)("input",{type:"text",value:C.method_name_ar,onChange:e=>T({...C,method_name_ar:e.target.value}),className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"أدخل اسم الاختبار بالعربية"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-foreground mb-1",children:"ar"===r?"الوصف (إنجليزي)":"Description (English)"}),(0,a.jsx)("textarea",{value:C.description,onChange:e=>T({...C,description:e.target.value}),className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500",rows:3,placeholder:"Enter test description in English"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-foreground mb-1",children:"ar"===r?"الوصف (عربي)":"Description (Arabic)"}),(0,a.jsx)("textarea",{value:C.description_ar,onChange:e=>T({...C,description_ar:e.target.value}),className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500",rows:3,placeholder:"أدخل وصف الاختبار بالعربية"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-foreground mb-1",children:"ar"===r?"الفئة":"Category"}),(0,a.jsxs)("select",{value:C.category,onChange:e=>T({...C,category:e.target.value}),className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500",children:[(0,a.jsx)("option",{value:"basic",children:"ar"===r?"أساسي":"Basic"}),(0,a.jsx)("option",{value:"advanced",children:"ar"===r?"متقدم":"Advanced"}),(0,a.jsx)("option",{value:"specialized",children:"ar"===r?"متخصص":"Specialized"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-foreground mb-1",children:"ar"===r?"مستوى الأمان":"Safety Level"}),(0,a.jsxs)("select",{value:C.safety_level,onChange:e=>T({...C,safety_level:e.target.value}),className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500",children:[(0,a.jsx)("option",{value:"low",children:"ar"===r?"منخفض":"Low"}),(0,a.jsx)("option",{value:"medium",children:"ar"===r?"متوسط":"Medium"}),(0,a.jsx)("option",{value:"high",children:"ar"===r?"عالي":"High"}),(0,a.jsx)("option",{value:"extreme",children:"ar"===r?"خطر شديد":"Extreme"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-foreground mb-1",children:"ar"===r?"وقت التحضير (دقيقة)":"Preparation Time (min)"}),(0,a.jsx)("input",{type:"number",value:C.preparation_time,onChange:e=>T({...C,preparation_time:parseInt(e.target.value)||5}),className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500",min:"1",max:"120"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-foreground mb-1",children:"ar"===r?"اللون الأساسي":"Primary Color"}),(0,a.jsx)("input",{type:"color",value:C.color_primary,onChange:e=>T({...C,color_primary:e.target.value}),className:"w-full h-10 border border-border rounded-lg focus:ring-2 focus:ring-primary-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-foreground mb-1",children:"ar"===r?"الأيقونة":"Icon"}),(0,a.jsx)("input",{type:"text",value:C.icon,onChange:e=>T({...C,icon:e.target.value}),className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"BeakerIcon"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-foreground mb-1",children:"ar"===r?"خطوات التحضير (إنجليزي)":"Preparation Steps (English)"}),(0,a.jsx)("textarea",{value:C.prepare||"",onChange:e=>T({...C,prepare:e.target.value}),className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500",rows:4,placeholder:"Enter preparation steps in English"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-foreground mb-1",children:"ar"===r?"خطوات التحضير (عربي)":"Preparation Steps (Arabic)"}),(0,a.jsx)("textarea",{value:C.prepare_ar||"",onChange:e=>T({...C,prepare_ar:e.target.value}),className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500",rows:4,placeholder:"أدخل خطوات التحضير بالعربية"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-foreground mb-1",children:"ar"===r?"نوع الاختبار":"Test Type"}),(0,a.jsx)("input",{type:"text",value:C.test_type||"",onChange:e=>T({...C,test_type:e.target.value}),className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"F/L, L, etc."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-foreground mb-1",children:"ar"===r?"رقم الاختبار":"Test Number"}),(0,a.jsx)("input",{type:"text",value:C.test_number||"",onChange:e=>T({...C,test_number:e.target.value}),className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"Test number"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-foreground mb-1",children:"ar"===r?"المرجع":"Reference"}),(0,a.jsx)("input",{type:"text",value:C.reference||"",onChange:e=>T({...C,reference:e.target.value}),className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"Scientific reference"})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 rtl:space-x-reverse mt-6 pt-4 border-t border-border",children:[(0,a.jsx)(o.z,{variant:"outline",onClick:()=>{N(!1),k(!1),S(null)},children:"ar"===r?"إلغاء":"Cancel"}),(0,a.jsx)(o.z,{onClick:A,children:_?"ar"===r?"حفظ التغييرات":"Save Changes":"ar"===r?"إضافة الاختبار":"Add Test"})]})]})})})]})}function X(e){let{lang:r}=e,[t,l]=(0,s.useState)([]),[i,d]=(0,s.useState)([]),[c,m]=(0,s.useState)(!0),[x,g]=(0,s.useState)(!1),[u,h]=(0,s.useState)(null),[p,y]=(0,s.useState)(""),[b,f]=(0,s.useState)("all"),[j,v]=(0,s.useState)("all"),[N,w]=(0,s.useState)({test_id:"",color_result:"",color_result_ar:"",color_hex:"#000000",possible_substance:"",possible_substance_ar:"",confidence_level:"medium"});(0,n.nZ)(r),(0,s.useEffect)(()=>{k()},[]);let k=async()=>{m(!0);try{let[e,r]=await Promise.all([H.KK.getAll(),H.kS.getAll()]);l(e),d(r),console.log("✅ Loaded data:",{colorResults:e.length,tests:r.length})}catch(e){console.error("Error loading data:",e),G.ZP.error("خطأ في تحميل البيانات | Error loading data")}finally{m(!1)}},_=e=>{h(e),w({test_id:e.test_id,color_result:e.color_result,color_result_ar:e.color_result_ar||"",color_hex:e.color_hex,possible_substance:e.possible_substance,possible_substance_ar:e.possible_substance_ar||"",confidence_level:e.confidence_level}),g(!0)},S=async()=>{try{u?(await H.KK.update(u.id,N),G.ZP.success("تم تحديث النتيجة بنجاح | Result updated successfully")):(await H.KK.add(N),G.ZP.success("تم إضافة النتيجة بنجاح | Result added successfully")),g(!1),h(null),await k()}catch(e){console.error("Error saving result:",e),G.ZP.error("خطأ في حفظ النتيجة | Error saving result")}},C=async e=>{if(confirm("ar"===r?"هل أنت متأكد من حذف هذه النتيجة؟":"Are you sure you want to delete this result?"))try{await H.KK.delete(e),G.ZP.success("ar"===r?"تم حذف النتيجة":"Result deleted"),await k()}catch(e){console.error("Error deleting result:",e),G.ZP.error("ar"===r?"خطأ في حذف النتيجة":"Error deleting result")}},T=t.filter(e=>{let r=""===p||e.color_result.toLowerCase().includes(p.toLowerCase())||e.color_result_ar.includes(p)||e.possible_substance.toLowerCase().includes(p.toLowerCase())||e.possible_substance_ar.includes(p),t="all"===b||e.test_id===b,a="all"===j||e.confidence_level===j;return r&&t&&a}),E=e=>{switch(e){case"very_high":return"text-green-700 bg-green-100 border-green-300";case"high":return"text-green-600 bg-green-50 border-green-200";case"medium":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"low":return"text-red-600 bg-red-50 border-red-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},I=e=>{let t=i.find(r=>r.id===e);return t?"ar"===r?t.method_name_ar:t.method_name:e};return c?(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-foreground",children:"ar"===r?"إدارة النتائج اللونية":"Color Results Management"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"ar"===r?"إدارة وتحرير النتائج اللونية للاختبارات":"Manage and edit color results for tests"})]}),(0,a.jsxs)(o.z,{onClick:()=>{h(null),w({test_id:"",color_result:"",color_result_ar:"",color_hex:"#000000",possible_substance:"",possible_substance_ar:"",confidence_level:"medium"}),g(!0)},className:"flex items-center space-x-2 rtl:space-x-reverse",children:[(0,a.jsx)(L.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"ar"===r?"إضافة نتيجة جديدة":"Add New Result"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsx)("div",{children:(0,a.jsx)("input",{type:"text",placeholder:"ar"===r?"البحث في النتائج...":"Search results...",value:p,onChange:e=>y(e.target.value),className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})}),(0,a.jsx)("div",{children:(0,a.jsxs)("select",{value:b,onChange:e=>f(e.target.value),className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500",children:[(0,a.jsx)("option",{value:"all",children:"ar"===r?"جميع الاختبارات":"All Tests"}),i.map(e=>(0,a.jsx)("option",{value:e.id,children:"ar"===r?e.method_name_ar:e.method_name},e.id))]})}),(0,a.jsx)("div",{children:(0,a.jsxs)("select",{value:j,onChange:e=>v(e.target.value),className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500",children:[(0,a.jsx)("option",{value:"all",children:"ar"===r?"جميع مستويات الثقة":"All Confidence Levels"}),(0,a.jsx)("option",{value:"very_high",children:"ar"===r?"عالي جداً":"Very High"}),(0,a.jsx)("option",{value:"high",children:"ar"===r?"عالي":"High"}),(0,a.jsx)("option",{value:"medium",children:"ar"===r?"متوسط":"Medium"}),(0,a.jsx)("option",{value:"low",children:"ar"===r?"منخفض":"Low"})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-border",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[(0,a.jsx)(U.Z,{className:"h-5 w-5 text-primary-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:"ar"===r?"إجمالي النتائج":"Total Results"})]}),(0,a.jsx)("p",{className:"text-2xl font-bold text-foreground mt-1",children:t.length})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-border",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full bg-green-500"}),(0,a.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:"ar"===r?"ثقة عالية":"High Confidence"})]}),(0,a.jsx)("p",{className:"text-2xl font-bold text-foreground mt-1",children:t.filter(e=>"very_high"===e.confidence_level||"high"===e.confidence_level).length})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-border",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),(0,a.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:"ar"===r?"ثقة متوسطة":"Medium Confidence"})]}),(0,a.jsx)("p",{className:"text-2xl font-bold text-foreground mt-1",children:t.filter(e=>"medium"===e.confidence_level).length})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-border",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full bg-red-500"}),(0,a.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:"ar"===r?"ثقة منخفضة":"Low Confidence"})]}),(0,a.jsx)("p",{className:"text-2xl font-bold text-foreground mt-1",children:t.filter(e=>"low"===e.confidence_level).length})]})]}),(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-border overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"ar"===r?"اللون":"Color"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"ar"===r?"الاختبار":"Test"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"ar"===r?"المادة المحتملة":"Possible Substance"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"ar"===r?"مستوى الثقة":"Confidence"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"ar"===r?"الإجراءات":"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:T.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3 rtl:space-x-reverse",children:[(0,a.jsx)("div",{className:"w-6 h-6 rounded-full border border-gray-300",style:{backgroundColor:e.color_hex}}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-foreground",children:"ar"===r?e.color_result_ar:e.color_result}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:e.color_hex})]})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm text-foreground",children:I(e.test_id)})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm text-foreground",children:"ar"===r?e.possible_substance_ar:e.possible_substance})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full border ".concat(E(e.confidence_level)),children:"ar"===r?"very_high"===e.confidence_level?"عالي جداً":"high"===e.confidence_level?"عالي":"medium"===e.confidence_level?"متوسط":"منخفض":e.confidence_level.replace("_"," ")})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[(0,a.jsx)(o.z,{variant:"ghost",size:"sm",onClick:()=>_(e),className:"text-blue-600 hover:text-blue-700",children:(0,a.jsx)(q.Z,{className:"h-4 w-4"})}),(0,a.jsx)(o.z,{variant:"ghost",size:"sm",onClick:()=>C(e.id),className:"text-red-600 hover:text-red-700",children:(0,a.jsx)(J.Z,{className:"h-4 w-4"})})]})})]},e.id))})]})})}),x&&(0,a.jsx)(W,{lang:r,result:u,tests:i,onSave:S,onClose:()=>{g(!1),h(null)}})]})}function W(e){let{lang:r,result:t,tests:l,onSave:n,onClose:i}=e,[d,c]=(0,s.useState)({id:(null==t?void 0:t.id)||"",test_id:(null==t?void 0:t.test_id)||"",color_result:(null==t?void 0:t.color_result)||"",color_result_ar:(null==t?void 0:t.color_result_ar)||"",color_hex:(null==t?void 0:t.color_hex)||"#FFFFFF",possible_substance:(null==t?void 0:t.possible_substance)||"",possible_substance_ar:(null==t?void 0:t.possible_substance_ar)||"",confidence_level:(null==t?void 0:t.confidence_level)||"medium"}),m=e=>{let{name:r,value:t}=e.target;c(e=>({...e,[r]:t}))};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-foreground",children:t?"ar"===r?"تحرير النتيجة اللونية":"Edit Color Result":"ar"===r?"إضافة نتيجة لونية جديدة":"Add New Color Result"}),(0,a.jsx)("button",{onClick:i,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!t){let e="".concat(d.test_id,"-").concat(d.color_result.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""));d.id=e}n(d)},className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"ar"===r?"الاختبار":"Test"}),(0,a.jsxs)("select",{name:"test_id",value:d.test_id,onChange:m,required:!0,className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500",children:[(0,a.jsx)("option",{value:"",children:"ar"===r?"اختر الاختبار":"Select Test"}),l.map(e=>(0,a.jsx)("option",{value:e.id,children:"ar"===r?e.method_name_ar:e.method_name},e.id))]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"ar"===r?"نتيجة اللون (إنجليزي)":"Color Result (English)"}),(0,a.jsx)("input",{type:"text",name:"color_result",value:d.color_result,onChange:m,required:!0,className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"Purple to violet"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"ar"===r?"نتيجة اللون (عربي)":"Color Result (Arabic)"}),(0,a.jsx)("input",{type:"text",name:"color_result_ar",value:d.color_result_ar,onChange:m,required:!0,className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"بنفسجي إلى بنفسجي داكن"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"ar"===r?"كود اللون":"Color Hex Code"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[(0,a.jsx)("input",{type:"color",name:"color_hex",value:d.color_hex,onChange:m,className:"w-12 h-10 border border-border rounded cursor-pointer"}),(0,a.jsx)("input",{type:"text",name:"color_hex",value:d.color_hex,onChange:m,required:!0,className:"flex-1 px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"#8B5CF6"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"ar"===r?"المادة المحتملة (إنجليزي)":"Possible Substance (English)"}),(0,a.jsx)("input",{type:"text",name:"possible_substance",value:d.possible_substance,onChange:m,required:!0,className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"Opium, Morphine, Heroin"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"ar"===r?"المادة المحتملة (عربي)":"Possible Substance (Arabic)"}),(0,a.jsx)("input",{type:"text",name:"possible_substance_ar",value:d.possible_substance_ar,onChange:m,required:!0,className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"الأفيون، المورفين، الهيروين"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"ar"===r?"مستوى الثقة":"Confidence Level"}),(0,a.jsxs)("select",{name:"confidence_level",value:d.confidence_level,onChange:m,className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500",children:[(0,a.jsx)("option",{value:"very_high",children:"ar"===r?"عالي جداً":"Very High"}),(0,a.jsx)("option",{value:"high",children:"ar"===r?"عالي":"High"}),(0,a.jsx)("option",{value:"medium",children:"ar"===r?"متوسط":"Medium"}),(0,a.jsx)("option",{value:"low",children:"ar"===r?"منخفض":"Low"})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4 rtl:space-x-reverse pt-6 border-t border-border",children:[(0,a.jsx)(o.z,{type:"button",variant:"outline",onClick:i,children:"ar"===r?"إلغاء":"Cancel"}),(0,a.jsx)(o.z,{type:"submit",children:t?"ar"===r?"تحديث النتيجة":"Update Result":"ar"===r?"إضافة النتيجة":"Add Result"})]})]})]})})})}var Y=t(94868);function $(e){let{lang:r}=e,[t,l]=(0,s.useState)({totalTests:0,totalColors:0,totalSessions:0,recentActivity:[],popularTests:[],systemHealth:"good"}),[i,d]=(0,s.useState)(!0),[m,x]=(0,s.useState)("dashboard");(0,n.nZ)(r);let p=[{id:"dashboard",name:"ar"===r?"لوحة التحكم":"Dashboard",icon:g.Z},{id:"tests",name:"ar"===r?"إدارة الاختبارات":"Tests Management",icon:F.Z},{id:"colors",name:"ar"===r?"إدارة النتائج اللونية":"Color Results",icon:U.Z},{id:"reports",name:"ar"===r?"التقارير":"Reports",icon:u.Z},{id:"database",name:"ar"===r?"قاعدة البيانات":"Database",icon:N.Z},{id:"excel",name:"ar"===r?"ملفات Excel":"Excel Files",icon:Z.Z}];(0,s.useEffect)(()=>{(async()=>{try{d(!0);let e=await c.D.getChemicalTests(),r=await c.D.getColorResults(),t=JSON.parse(localStorage.getItem("test_results")||"[]"),a=t.slice(-10).reverse(),s=t.reduce((e,r)=>(e[r.testId]=(e[r.testId]||0)+1,e),{}),n=Object.entries(s).map(e=>{let[r,t]=e;return{testId:r,count:t}}).sort((e,r)=>r.count-e.count).slice(0,5);l({totalTests:e.length,totalColors:r.length,totalSessions:t.length,recentActivity:a,popularTests:n,systemHealth:"good"})}catch(e){console.error("Error loading dashboard data:",e)}finally{d(!1)}})()},[]);let y=()=>{try{let e={testResults:JSON.parse(localStorage.getItem("test_results")||"[]"),exportDate:new Date().toISOString(),version:"2.0.0"},r=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),t=URL.createObjectURL(r),a=document.createElement("a");a.href=t,a.download="color-testing-data-".concat(new Date().toISOString().split("T")[0],".json"),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(t)}catch(e){console.error("Error exporting data:",e)}},j=e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!a)return;let s=new FileReader;s.onload=e=>{try{var t;let r=JSON.parse(null===(t=e.target)||void 0===t?void 0:t.result);r.testResults&&Array.isArray(r.testResults)&&(localStorage.setItem("test_results",JSON.stringify(r.testResults)),window.location.reload())}catch(e){console.error("Error importing data:",e),alert("ar"===r?"خطأ في استيراد البيانات":"Error importing data")}},s.readAsText(a)},w=()=>{confirm("ar"===r?"هل أنت متأكد من حذف جميع البيانات؟":"Are you sure you want to clear all data?")&&(localStorage.removeItem("test_results"),window.location.reload())};if(i)return(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-500",children:"ar"===r?"جاري تحميل البيانات...":"Loading dashboard data..."})]})});let k=()=>(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsx)("div",{className:"bg-white border border-gray-300 rounded-lg p-6 dark:bg-gray-800 dark:border-gray-600",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"ar"===r?"إجمالي الاختبارات":"Total Tests"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:t.totalTests})]}),(0,a.jsx)(F.Z,{className:"h-8 w-8 text-primary-600"})]})}),(0,a.jsx)("div",{className:"bg-white border border-gray-300 rounded-lg p-6 dark:bg-gray-800 dark:border-gray-600",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"ar"===r?"النتائج اللونية":"Color Results"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:t.totalColors})]}),(0,a.jsx)(U.Z,{className:"h-8 w-8 text-primary-600"})]})}),(0,a.jsx)("div",{className:"bg-white border border-gray-300 rounded-lg p-6 dark:bg-gray-800 dark:border-gray-600",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"ar"===r?"جلسات الاختبار":"Test Sessions"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:t.totalSessions})]}),(0,a.jsx)(Y.Z,{className:"h-8 w-8 text-primary-600"})]})}),(0,a.jsx)("div",{className:"bg-white border border-gray-300 rounded-lg p-6 dark:bg-gray-800 dark:border-gray-600",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"ar"===r?"حالة النظام":"System Health"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-green-600",children:"ar"===r?"ممتاز":"Excellent"})]}),(0,a.jsx)(f.Z,{className:"h-8 w-8 text-green-600"})]})})]}),(0,a.jsxs)("div",{className:"bg-white border border-gray-300 rounded-lg p-6 dark:bg-gray-800 dark:border-gray-600",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"ar"===r?"إدارة البيانات":"Data Management"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,a.jsxs)(o.z,{onClick:y,className:"flex items-center space-x-2 rtl:space-x-reverse",children:[(0,a.jsx)(h.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"ar"===r?"تصدير البيانات":"Export Data"})]}),(0,a.jsxs)("label",{className:"cursor-pointer",children:[(0,a.jsx)("input",{type:"file",accept:".json",onChange:j,className:"hidden"}),(0,a.jsxs)("span",{className:"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-white transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 dark:ring-offset-slate-950 dark:focus-visible:ring-slate-300 border border-gray-300 bg-white hover:bg-gray-50 hover:text-gray-900 dark:border-gray-600 dark:bg-gray-800 dark:hover:bg-gray-700 dark:hover:text-gray-50 h-10 px-4 py-2 flex items-center space-x-2 rtl:space-x-reverse",children:[(0,a.jsx)(z.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"ar"===r?"استيراد البيانات":"Import Data"})]})]}),(0,a.jsxs)(o.z,{onClick:w,variant:"destructive",className:"flex items-center space-x-2 rtl:space-x-reverse",children:[(0,a.jsx)(J.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"ar"===r?"مسح البيانات":"Clear Data"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white border border-gray-300 rounded-lg p-6 dark:bg-gray-800 dark:border-gray-600",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"ar"===r?"النشاط الأخير":"Recent Activity"}),t.recentActivity.length>0?(0,a.jsx)("div",{className:"space-y-3",children:t.recentActivity.slice(0,5).map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center space-x-3 rtl:space-x-reverse p-3 bg-gray-50 rounded-lg dark:bg-gray-700",children:[(0,a.jsx)(V.Z,{className:"h-5 w-5 text-primary-600 flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 truncate",children:[e.testId," Test"]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["ar"===r?"ثقة:":"Confidence:"," ",e.confidence,"%"]})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:[(0,a.jsx)(v.Z,{className:"h-4 w-4 inline mr-1 rtl:ml-1 rtl:mr-0"}),new Date(e.timestamp).toLocaleDateString("ar"===r?"ar-SA":"en-US")]})]},t))}):(0,a.jsx)("p",{className:"text-gray-500 text-center py-8",children:"ar"===r?"لا يوجد نشاط حديث":"No recent activity"})]}),(0,a.jsxs)("div",{className:"bg-white border border-gray-300 rounded-lg p-6 dark:bg-gray-800 dark:border-gray-600",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"ar"===r?"الاختبارات الأكثر استخداماً":"Popular Tests"}),t.popularTests.length>0?(0,a.jsx)("div",{className:"space-y-3",children:t.popularTests.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg dark:bg-gray-700",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 rtl:space-x-reverse",children:[(0,a.jsx)(g.Z,{className:"h-5 w-5 text-primary-600"}),(0,a.jsxs)("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:[e.testId.charAt(0).toUpperCase()+e.testId.slice(1)," Test"]})]}),(0,a.jsxs)("span",{className:"text-sm font-medium text-primary-600",children:[e.count," ","ar"===r?"مرة":"times"]})]},t))}):(0,a.jsx)("p",{className:"text-gray-500 text-center py-8",children:"ar"===r?"لا توجد بيانات كافية":"Not enough data"})]})]}),(0,a.jsxs)("div",{className:"bg-white border border-gray-300 rounded-lg p-6 dark:bg-gray-800 dark:border-gray-600",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"ar"===r?"معلومات النظام":"System Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:"ar"===r?"الإصدار:":"Version:"}),(0,a.jsx)("span",{className:"text-gray-500 ml-2 rtl:mr-2 rtl:ml-0",children:"2.0.0"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:"ar"===r?"آخر تحديث:":"Last Updated:"}),(0,a.jsx)("span",{className:"text-gray-500 ml-2 rtl:mr-2 rtl:ml-0",children:new Date().toLocaleDateString("ar"===r?"ar-SA":"en-US")})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:"ar"===r?"حالة التخزين:":"Storage Status:"}),(0,a.jsx)("span",{className:"text-green-600 ml-2 rtl:mr-2 rtl:ml-0",children:"ar"===r?"متاح":"Available"})]})]})]})]});return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"border-b border-gray-200 dark:border-gray-700",children:(0,a.jsx)("nav",{className:"-mb-px flex space-x-8 rtl:space-x-reverse",children:p.map(e=>(0,a.jsxs)("button",{onClick:()=>x(e.id),className:"group inline-flex items-center py-4 px-1 border-b-2 font-medium text-sm ".concat(m===e.id?"border-primary-500 text-primary-600 dark:text-primary-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"),children:[(0,a.jsx)(e.icon,{className:"mr-2 rtl:ml-2 rtl:mr-0 h-5 w-5 ".concat(m===e.id?"text-primary-500":"text-gray-400 group-hover:text-gray-500")}),e.name]},e.id))})}),(()=>{switch(m){case"tests":return(0,a.jsx)(K,{lang:r});case"colors":return(0,a.jsx)(X,{lang:r});case"reports":return(0,a.jsx)(b,{lang:r});case"database":return(0,a.jsx)(S,{lang:r});case"excel":return(0,a.jsx)(M,{lang:r});default:return k()}})()]})}var Q=t(2825),ee=t(47193),er=t(63722),et=t(20357);function ea(e){let{lang:r,onLogin:t,isLoading:l=!1,error:i}=e,[d,c]=(0,s.useState)(""),[m,x]=(0,s.useState)(!1),[g,u]=(0,s.useState)(0),[h,p]=(0,s.useState)(!1),[y,b]=(0,s.useState)(0);(0,n.nZ)(r),(0,s.useEffect)(()=>{let e=localStorage.getItem("ct_lockout_time"),r=localStorage.getItem("ct_login_attempts");if(e){let r=parseInt(e),t=Date.now();if(t<r){p(!0),b(Math.ceil((r-t)/6e4));let e=setInterval(()=>{let t=Math.ceil((r-Date.now())/6e4);t<=0?(p(!1),b(0),localStorage.removeItem("ct_lockout_time"),localStorage.removeItem("ct_login_attempts"),clearInterval(e)):b(t)},1e3);return()=>clearInterval(e)}localStorage.removeItem("ct_lockout_time"),localStorage.removeItem("ct_login_attempts")}r&&u(parseInt(r))},[]);let f=async e=>{if(e.preventDefault(),!h&&!l&&d.trim())try{await t(d),localStorage.removeItem("ct_login_attempts"),localStorage.removeItem("ct_lockout_time"),u(0)}catch(r){let e=g+1;if(u(e),localStorage.setItem("ct_login_attempts",e.toString()),e>=parseInt(et.env.NEXT_PUBLIC_MAX_LOGIN_ATTEMPTS||"5")){let e=parseInt(et.env.NEXT_PUBLIC_LOCKOUT_DURATION||"900000"),r=Date.now()+e;localStorage.setItem("ct_lockout_time",r.toString()),p(!0),b(Math.ceil(e/6e4))}c("")}},N=parseInt(et.env.NEXT_PUBLIC_MAX_LOGIN_ATTEMPTS||"5"),w=Math.max(0,N-g);return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-white dark:bg-gray-900 p-4",children:(0,a.jsxs)("div",{className:"w-full max-w-md",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-primary-100 dark:bg-primary-900 mb-4",children:(0,a.jsx)(Q.Z,{className:"h-8 w-8 text-primary-600"})}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"ar"===r?"دخول المدير":"Admin Login"}),(0,a.jsx)("p",{className:"text-gray-500",children:"ar"===r?"أدخل كلمة المرور للوصول إلى لوحة التحكم":"Enter your password to access the admin panel"})]}),(0,a.jsxs)("div",{className:"bg-white border border-gray-300 rounded-lg shadow-lg p-6 dark:bg-gray-800 dark:border-gray-600",children:[(0,a.jsxs)("form",{onSubmit:f,className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"ar"===r?"كلمة المرور":"Password"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:m?"text":"password",value:d,onChange:e=>c(e.target.value),disabled:h||l,placeholder:"ar"===r?"أدخل كلمة المرور":"Enter password",className:"w-full px-3 py-2 pr-10 rtl:pl-10 rtl:pr-3 border border-gray-300 rounded-lg bg-white text-gray-900 placeholder-gray-500 focus:ring-2 focus:ring-primary-500 focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400",required:!0}),(0,a.jsx)("button",{type:"button",onClick:()=>x(!m),disabled:h||l,className:"absolute inset-y-0 right-0 rtl:left-0 rtl:right-auto flex items-center pr-3 rtl:pl-3 rtl:pr-0 text-gray-500 hover:text-gray-900 disabled:opacity-50 dark:text-gray-400 dark:hover:text-gray-100",children:m?(0,a.jsx)(ee.Z,{className:"h-5 w-5"}):(0,a.jsx)(V.Z,{className:"h-5 w-5"})})]})]}),i&&(0,a.jsxs)("div",{className:"flex items-start space-x-2 rtl:space-x-reverse p-3 bg-red-50 dark:bg-red-950 border border-red-200 dark:border-red-800 rounded-lg",children:[(0,a.jsx)(j.Z,{className:"h-5 w-5 text-red-600 mt-0.5 flex-shrink-0"}),(0,a.jsx)("p",{className:"text-sm text-red-700 dark:text-red-300",children:i})]}),h&&(0,a.jsxs)("div",{className:"flex items-start space-x-2 rtl:space-x-reverse p-3 bg-yellow-50 dark:bg-yellow-950 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:[(0,a.jsx)(v.Z,{className:"h-5 w-5 text-yellow-600 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:[(0,a.jsx)("p",{className:"font-medium mb-1",children:"ar"===r?"الحساب مقفل مؤقتاً":"Account Temporarily Locked"}),(0,a.jsx)("p",{children:"ar"===r?"يرجى المحاولة مرة أخرى خلال ".concat(y," دقيقة"):"Please try again in ".concat(y," minute").concat(1!==y?"s":"")})]})]}),!h&&g>0&&w>0&&(0,a.jsxs)("div",{className:"flex items-start space-x-2 rtl:space-x-reverse p-3 bg-yellow-50 dark:bg-yellow-950 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:[(0,a.jsx)(j.Z,{className:"h-5 w-5 text-yellow-600 mt-0.5 flex-shrink-0"}),(0,a.jsx)("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:"ar"===r?"محاولات متبقية: ".concat(w):"Remaining attempts: ".concat(w)})]}),(0,a.jsx)(o.z,{type:"submit",disabled:h||l||!d.trim(),className:"w-full flex items-center justify-center space-x-2 rtl:space-x-reverse",children:l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,a.jsx)("span",{children:"ar"===r?"جاري التحقق...":"Verifying..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(er.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"ar"===r?"دخول":"Login"})]})})]}),(0,a.jsx)("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-950 border border-blue-200 dark:border-blue-800 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-start space-x-2 rtl:space-x-reverse",children:[(0,a.jsx)(Q.Z,{className:"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:[(0,a.jsx)("p",{className:"font-medium mb-1",children:"ar"===r?"ملاحظة أمنية:":"Security Notice:"}),(0,a.jsxs)("ul",{className:"text-xs space-y-1",children:[(0,a.jsx)("li",{children:"ar"===r?"• الحد الأقصى للمحاولات: ".concat(N):"• Maximum attempts: ".concat(N)}),(0,a.jsx)("li",{children:"ar"===r?"• مدة القفل: 15 دقيقة":"• Lockout duration: 15 minutes"}),(0,a.jsx)("li",{children:"ar"===r?"• يتم تسجيل جميع محاولات الدخول":"• All login attempts are logged"})]})]})]})})]}),(0,a.jsxs)("div",{className:"text-center mt-6",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"ar"===r?"تطبيق اختبارات الألوان للكشف عن المخدرات والمؤثرات العقلية - الإصدار 2.0":"Color Testing for Drug and Psychoactive Substance Detection - Version 2.0"}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["\xa9 2025 ","ar"===r?"محمد نفاع الرويلي & يوسف مسير العنزي":"Mohammed Nafa Al-Ruwaili & Youssef Musayyir Al-Anzi"]})]})]})})}var es=t(69992),el=t(92009),en=t(74634);class ei{static getInstance(){return ei.instance||(ei.instance=new ei),ei.instance}async initialize(){try{return this.isInitialized=!0,console.log("\uD83D\uDCE7 Email service initialized"),!0}catch(e){return console.error("Failed to initialize email service:",e),!1}}async sendVerificationCode(e,r){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ar";try{if(!this.isInitialized&&!await this.initialize())throw Error("EmailJS not initialized");return await this.fallbackEmailSend(e,r,t)}catch(a){return console.error("Email sending failed:",a),await this.fallbackEmailSend(e,r,t)}}generateEmailMessage(e,r){return"ar"===r?"\nمرحباً،\n\nتم طلب استعادة كلمة مرور حساب المدير لنظام اختبارات الألوان للكشف عن المخدرات.\n\nرمز التحقق الخاص بك هو: ".concat(e,"\n\nهذا الرمز صالح لمدة 5 دقائق فقط.\n\nتنبيه أمني:\n• لا تشارك هذا الرمز مع أي شخص\n• إذا لم تطلب هذا الرمز، تجاهل هذه الرسالة\n• تأكد من أنك تستخدم الموقع الرسمي\n\nمع تحيات،\nفريق نظام اختبارات الألوان\nوزارة الصحة - المملكة العربية السعودية\n      "):"\nHello,\n\nA password recovery request has been made for the admin account of the Color Testing System for Drug Detection.\n\nYour verification code is: ".concat(e,"\n\nThis code is valid for 5 minutes only.\n\nSecurity Warning:\n• Do not share this code with anyone\n• If you didn't request this code, ignore this message\n• Make sure you're using the official website\n\nBest regards,\nColor Testing System Team\nMinistry of Health - Saudi Arabia\n      ")}async fallbackEmailSend(e,r,t){try{let a=encodeURIComponent("ar"===t?"رمز التحقق - استعادة كلمة مرور الأدمن":"Verification Code - Admin Password Recovery"),s=encodeURIComponent(this.generateEmailMessage(r,t)),l="mailto:".concat(e,"?subject=").concat(a,"&body=").concat(s);return window.open(l,"_blank"),console.log("\uD83D\uDCE7 Fallback: Email client opened"),{success:!0,messageId:"fallback_mailto"}}catch(e){return console.error("Fallback email failed:",e),{success:!1,error:"All email methods failed"}}}isValidEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}configure(e){this.config={...this.config,...e},this.isInitialized=!1}constructor(){this.isInitialized=!1,this.config={serviceId:"service_admin_recovery",templateId:"template_verification",publicKey:"YOUR_EMAILJS_PUBLIC_KEY"}}}let eo=ei.getInstance();class ed{static getInstance(){return ed.instance||(ed.instance=new ed),ed.instance}async sendEmail(e){try{switch(this.emailProvider){case"emailjs":return await this.sendViaEmailJS(e);case"sendgrid":return await this.sendViaSendGrid(e);default:throw Error("Email provider not configured")}}catch(e){return console.error("Email sending failed:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async sendSMS(e){try{switch(this.smsProvider){case"twilio":return await this.sendViaTwilio(e);case"aws-sns":return await this.sendViaAWSSNS(e);default:throw Error("SMS provider not configured")}}catch(e){return console.error("SMS sending failed:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async sendVerificationEmail(e,r){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ar";try{let a=await eo.sendVerificationCode(e,r,t);if(a.success)return{success:!0,messageId:a.messageId};throw Error(a.error||"Failed to send email")}catch(a){return console.error("Email service failed, using fallback:",a),await this.sendEmailFallback(e,r,t)}}async sendEmailFallback(e,r){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ar";return await this.sendEmail({to:e,subject:"ar"===t?"رمز التحقق - استعادة كلمة مرور الأدمن":"Verification Code - Admin Password Recovery",body:"ar"===t?'\n      <div dir="rtl" style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">\n        <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 30px; text-align: center; color: white;">\n          <h1 style="margin: 0; font-size: 24px;">\uD83D\uDD10 رمز التحقق</h1>\n          <p style="margin: 10px 0 0 0; opacity: 0.9;">نظام اختبارات الألوان للكشف عن المخدرات</p>\n        </div>\n        \n        <div style="padding: 30px; background: #f8f9fa;">\n          <h2 style="color: #333; margin-bottom: 20px;">مرحباً،</h2>\n          \n          <p style="color: #666; line-height: 1.6; margin-bottom: 20px;">\n            تم طلب استعادة كلمة مرور حساب المدير. استخدم الرمز التالي للمتابعة:\n          </p>\n          \n          <div style="background: white; border: 2px dashed #667eea; border-radius: 10px; padding: 20px; text-align: center; margin: 20px 0;">\n            <div style="font-size: 32px; font-weight: bold; color: #667eea; letter-spacing: 5px;">'.concat(r,'</div>\n            <p style="color: #999; font-size: 14px; margin: 10px 0 0 0;">صالح لمدة 5 دقائق</p>\n          </div>\n          \n          <div style="background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 5px; padding: 15px; margin: 20px 0;">\n            <p style="color: #856404; margin: 0; font-size: 14px;">\n              <strong>⚠️ تنبيه أمني:</strong><br>\n              • لا تشارك هذا الرمز مع أي شخص<br>\n              • إذا لم تطلب هذا الرمز، تجاهل هذه الرسالة<br>\n              • الرمز صالح لمدة 5 دقائق فقط\n            </p>\n          </div>\n          \n          <p style="color: #666; font-size: 12px; margin-top: 30px;">\n            هذه رسالة آلية، لا تقم بالرد عليها.\n          </p>\n        </div>\n        \n        <div style="background: #333; color: white; padding: 20px; text-align: center; font-size: 12px;">\n          <p style="margin: 0;">\xa9 2025 نظام اختبارات الألوان - وزارة الصحة</p>\n        </div>\n      </div>\n    '):'\n      <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">\n        <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 30px; text-align: center; color: white;">\n          <h1 style="margin: 0; font-size: 24px;">\uD83D\uDD10 Verification Code</h1>\n          <p style="margin: 10px 0 0 0; opacity: 0.9;">Color Testing System for Drug Detection</p>\n        </div>\n        \n        <div style="padding: 30px; background: #f8f9fa;">\n          <h2 style="color: #333; margin-bottom: 20px;">Hello,</h2>\n          \n          <p style="color: #666; line-height: 1.6; margin-bottom: 20px;">\n            A password recovery request has been made for the admin account. Use the following code to continue:\n          </p>\n          \n          <div style="background: white; border: 2px dashed #667eea; border-radius: 10px; padding: 20px; text-align: center; margin: 20px 0;">\n            <div style="font-size: 32px; font-weight: bold; color: #667eea; letter-spacing: 5px;">'.concat(r,'</div>\n            <p style="color: #999; font-size: 14px; margin: 10px 0 0 0;">Valid for 5 minutes</p>\n          </div>\n          \n          <div style="background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 5px; padding: 15px; margin: 20px 0;">\n            <p style="color: #856404; margin: 0; font-size: 14px;">\n              <strong>⚠️ Security Warning:</strong><br>\n              • Do not share this code with anyone<br>\n              • If you didn\'t request this code, ignore this message<br>\n              • Code is valid for 5 minutes only\n            </p>\n          </div>\n          \n          <p style="color: #666; font-size: 12px; margin-top: 30px;">\n            This is an automated message, do not reply.\n          </p>\n        </div>\n        \n        <div style="background: #333; color: white; padding: 20px; text-align: center; font-size: 12px;">\n          <p style="margin: 0;">\xa9 2025 Color Testing System - Ministry of Health</p>\n        </div>\n      </div>\n    '),isHtml:!0})}async sendVerificationSMS(e,r){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ar";return await this.sendSMS({to:e,message:"ar"===t?"\uD83D\uDD10 رمز التحقق: ".concat(r,"\n\nنظام اختبارات الألوان\nصالح لمدة 5 دقائق\nلا تشارك هذا الرمز مع أحد"):"\uD83D\uDD10 Verification Code: ".concat(r,"\n\nColor Testing System\nValid for 5 minutes\nDo not share this code")})}async simulateEmailSend(e){return console.log("\uD83D\uDCE7 [DEV] Email Simulation:"),console.log("To:",e.to),console.log("Subject:",e.subject),console.log("Body:",e.body.substring(0,100)+"..."),await new Promise(e=>setTimeout(e,1500)),{success:!0,messageId:"dev_email_".concat(Date.now())}}async simulateSMSSend(e){return console.log("\uD83D\uDCF1 [DEV] SMS Simulation:"),console.log("To:",e.to),console.log("Message:",e.message),await new Promise(e=>setTimeout(e,2e3)),{success:!0,messageId:"dev_sms_".concat(Date.now())}}async sendViaEmailJS(e){try{throw Error("EmailJS not configured")}catch(e){throw e}}async sendViaSendGrid(e){throw Error("SendGrid not configured")}async sendViaTwilio(e){throw Error("Twilio not configured")}async sendViaAWSSNS(e){throw Error("AWS SNS not configured")}constructor(){this.emailProvider="emailjs",this.smsProvider="twilio"}}let ec=ed.getInstance();function em(e){let{lang:r,onBack:t,onRecoverySuccess:l}=e,[i,d]=(0,s.useState)("method"),[c,m]=(0,s.useState)("email"),[x,g]=(0,s.useState)(""),[u,h]=(0,s.useState)(""),[p,y]=(0,s.useState)(""),[b,N]=(0,s.useState)(""),[w,k]=(0,s.useState)(!1),[_,S]=(0,s.useState)(0),[C,T]=(0,s.useState)("");(0,n.nZ)(r);let E={email:"aburakan4551@gmail.com",sms:"00966562294551"},I=()=>Math.floor(1e5+9e5*Math.random()).toString(),D=()=>{S(300);let e=setInterval(()=>{S(r=>r<=1?(clearInterval(e),0):r-1)},1e3)},P=async()=>{k(!0);try{if("email"===c){if(x.toLowerCase()!==E.email.toLowerCase()){G.ZP.error("ar"===r?"البريد الإلكتروني غير صحيح":"Invalid email address"),k(!1);return}}else if(x!==E.sms){G.ZP.error("ar"===r?"رقم الجوال غير صحيح":"Invalid phone number"),k(!1);return}let e=I();T(e),await A(c,x,e);let t={method:c,contact:x,code:e,timestamp:Date.now(),attempts:0};sessionStorage.setItem("admin_recovery",JSON.stringify(t)),d("verification"),D(),G.ZP.success("ar"===r?"تم إرسال رمز التحقق إلى ".concat("email"===c?"البريد الإلكتروني":"الجوال"):"Verification code sent to ".concat("email"===c?"email":"phone"))}catch(e){console.error("Error sending verification code:",e),G.ZP.error("ar"===r?"خطأ في إرسال الرمز":"Error sending code")}finally{k(!1)}},A=async(e,t,a)=>{try{let s;if(!(s="email"===e?await ec.sendVerificationEmail(t,a,r):await ec.sendVerificationSMS(t,a,r)).success)throw Error(s.error||"Failed to send verification code");console.log("[SECURITY] Recovery code sent via ".concat(e," to ").concat(t.replace(/(.{3}).*(.{3})/,"$1***$2")))}catch(e){throw console.error("Error sending verification code:",e),e}};return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 via-white to-secondary-50 dark:from-primary-950 dark:via-gray-900 dark:to-secondary-950 flex items-center justify-center",children:(0,a.jsx)("div",{className:"max-w-md w-full mx-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-gray-300 shadow-lg p-8 dark:bg-gray-800 dark:border-gray-600",children:["method"===i&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-primary-100 dark:bg-primary-900 mb-4",children:(0,a.jsx)(es.Z,{className:"h-8 w-8 text-primary-600"})}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-foreground mb-2",children:"ar"===r?"استعادة كلمة المرور":"Password Recovery"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"ar"===r?"اختر طريقة التحقق لاستعادة كلمة المرور":"Choose verification method to recover your password"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"p-4 border-2 rounded-lg cursor-pointer transition-all ".concat("email"===c?"border-primary-500 bg-primary-50 dark:bg-primary-950":"border-border hover:border-primary-300"),onClick:()=>m("email"),children:(0,a.jsxs)("div",{className:"flex items-center space-x-3 rtl:space-x-reverse",children:[(0,a.jsx)(el.Z,{className:"h-6 w-6 text-primary-600"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-foreground",children:"ar"===r?"البريد الإلكتروني":"Email"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"ar"===r?"إرسال رمز التحقق عبر البريد الإلكتروني":"Send verification code via email"})]})]})}),(0,a.jsx)("div",{className:"p-4 border-2 rounded-lg cursor-pointer transition-all ".concat("sms"===c?"border-primary-500 bg-primary-50 dark:bg-primary-950":"border-border hover:border-primary-300"),onClick:()=>m("sms"),children:(0,a.jsxs)("div",{className:"flex items-center space-x-3 rtl:space-x-reverse",children:[(0,a.jsx)(en.Z,{className:"h-6 w-6 text-primary-600"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-foreground",children:"ar"===r?"رسالة نصية":"SMS"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"ar"===r?"إرسال رمز التحقق عبر الجوال":"Send verification code via SMS"})]})]})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"email"===c?"ar"===r?"البريد الإلكتروني":"Email Address":"ar"===r?"رقم الجوال":"Phone Number"}),(0,a.jsx)("input",{type:"email"===c?"email":"tel",value:x,onChange:e=>g(e.target.value),placeholder:"email"===c?"aburakan4551@gmail.com":"00966562294551",className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:!0})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(o.z,{onClick:P,disabled:!x||w,className:"w-full",children:w?(0,a.jsxs)("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,a.jsx)("span",{children:"ar"===r?"جاري الإرسال...":"Sending..."})]}):"ar"===r?"إرسال رمز التحقق":"Send Verification Code"}),(0,a.jsx)(o.z,{variant:"outline",onClick:t,className:"w-full",children:"ar"===r?"العودة":"Back"})]}),(0,a.jsx)("div",{className:"p-4 bg-yellow-50 dark:bg-yellow-950 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-start space-x-2 rtl:space-x-reverse",children:[(0,a.jsx)(j.Z,{className:"h-5 w-5 text-yellow-600 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:[(0,a.jsx)("p",{className:"font-medium mb-1",children:"ar"===r?"تنبيه أمني:":"Security Notice:"}),(0,a.jsx)("p",{className:"text-xs",children:"ar"===r?"سيتم إرسال رمز التحقق فقط إلى معلومات الاتصال المسجلة مسبقاً للمدير.":"Verification code will only be sent to pre-registered admin contact information."})]})]})})]}),"verification"===i&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-blue-100 dark:bg-blue-900 mb-4",children:(0,a.jsx)(Q.Z,{className:"h-8 w-8 text-blue-600"})}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-foreground mb-2",children:"ar"===r?"التحقق من الهوية":"Identity Verification"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"ar"===r?"تم إرسال رمز التحقق إلى ".concat("email"===c?"البريد الإلكتروني":"الجوال"):"Verification code sent to ".concat("email"===c?"email":"phone")}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:x.replace(/(.{3}).*(.{3})/,"$1***$2")})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"ar"===r?"رمز التحقق":"Verification Code"}),(0,a.jsx)("input",{type:"text",value:u,onChange:e=>h(e.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"123456",className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent text-center text-2xl tracking-widest",maxLength:6,autoFocus:!0})]}),_>0&&(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2 rtl:space-x-reverse text-sm text-muted-foreground",children:[(0,a.jsx)(v.Z,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:["ar"===r?"انتهاء الصلاحية خلال:":"Expires in:"," ","".concat(Math.floor(_/60),":").concat((_%60).toString().padStart(2,"0"))]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(o.z,{onClick:()=>{let e=JSON.parse(sessionStorage.getItem("admin_recovery")||"{}");if(!e.code){G.ZP.error("ar"===r?"انتهت صلاحية الجلسة":"Session expired"),d("method");return}if(Date.now()-e.timestamp>3e5){G.ZP.error("ar"===r?"انتهت صلاحية الرمز":"Code expired"),sessionStorage.removeItem("admin_recovery"),d("method");return}if(e.attempts>=3){G.ZP.error("ar"===r?"تم تجاوز عدد المحاولات المسموح":"Too many attempts"),sessionStorage.removeItem("admin_recovery"),d("method");return}if(u===e.code)e.verified=!0,sessionStorage.setItem("admin_recovery",JSON.stringify(e)),d("newPassword"),G.ZP.success("ar"===r?"تم التحقق بنجاح":"Verification successful");else{e.attempts=(e.attempts||0)+1,sessionStorage.setItem("admin_recovery",JSON.stringify(e));let t=3-e.attempts;G.ZP.error("ar"===r?"رمز خاطئ. المحاولات المتبقية: ".concat(t):"Invalid code. Attempts remaining: ".concat(t))}},disabled:6!==u.length,className:"w-full",children:"ar"===r?"تحقق من الرمز":"Verify Code"}),(0,a.jsx)(o.z,{variant:"outline",onClick:()=>d("method"),className:"w-full",children:"ar"===r?"العودة":"Back"}),0===_&&(0,a.jsx)(o.z,{variant:"ghost",onClick:P,className:"w-full text-primary-600",children:"ar"===r?"إعادة إرسال الرمز":"Resend Code"})]}),(0,a.jsx)("div",{className:"p-4 bg-blue-50 dark:bg-blue-950 border border-blue-200 dark:border-blue-800 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-start space-x-2 rtl:space-x-reverse",children:[(0,a.jsx)(Q.Z,{className:"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:[(0,a.jsx)("p",{className:"font-medium mb-1",children:"ar"===r?"نصائح الأمان:":"Security Tips:"}),(0,a.jsxs)("ul",{className:"text-xs space-y-1",children:[(0,a.jsxs)("li",{children:["• ","ar"===r?"الرمز صالح لمدة 5 دقائق فقط":"Code is valid for 5 minutes only"]}),(0,a.jsxs)("li",{children:["• ","ar"===r?"لديك 3 محاولات للإدخال":"You have 3 attempts to enter"]}),(0,a.jsxs)("li",{children:["• ","ar"===r?"لا تشارك الرمز مع أي شخص":"Do not share the code with anyone"]})]})]})]})})]}),"newPassword"===i&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-green-100 dark:bg-green-900 mb-4",children:(0,a.jsx)(es.Z,{className:"h-8 w-8 text-green-600"})}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-foreground mb-2",children:"ar"===r?"كلمة مرور جديدة":"New Password"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"ar"===r?"أدخل كلمة مرور جديدة قوية وآمنة":"Enter a new strong and secure password"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"ar"===r?"كلمة المرور الجديدة":"New Password"}),(0,a.jsx)("input",{type:"password",value:p,onChange:e=>y(e.target.value),className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"ar"===r?"أدخل كلمة مرور قوية":"Enter a strong password",autoFocus:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"ar"===r?"تأكيد كلمة المرور":"Confirm Password"}),(0,a.jsx)("input",{type:"password",value:b,onChange:e=>N(e.target.value),className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"ar"===r?"أعد إدخال كلمة المرور":"Re-enter password"})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(o.z,{onClick:()=>{let e=JSON.parse(sessionStorage.getItem("admin_recovery")||"{}");if(!e.verified){G.ZP.error("ar"===r?"لم يتم التحقق من الهوية":"Identity not verified"),d("method");return}if(p.length<8){G.ZP.error("ar"===r?"كلمة المرور يجب أن تكون 8 أحرف على الأقل":"Password must be at least 8 characters");return}if(p!==b){G.ZP.error("ar"===r?"كلمات المرور غير متطابقة":"Passwords do not match");return}let t=btoa(p);localStorage.setItem("admin_password_hash",t);let a={action:"password_reset",timestamp:new Date().toISOString(),method:e.method,contact:e.contact.replace(/(.{3}).*(.{3})/,"$1***$2")},s=JSON.parse(localStorage.getItem("security_logs")||"[]");s.push(a),localStorage.setItem("security_logs",JSON.stringify(s.slice(-50))),sessionStorage.removeItem("admin_recovery"),d("success"),setTimeout(()=>{l(p)},2e3)},disabled:!p||!b||p!==b,className:"w-full",children:"ar"===r?"تحديث كلمة المرور":"Update Password"}),(0,a.jsx)(o.z,{variant:"outline",onClick:()=>d("verification"),className:"w-full",children:"ar"===r?"العودة":"Back"})]}),(0,a.jsx)("div",{className:"p-4 bg-green-50 dark:bg-green-950 border border-green-200 dark:border-green-800 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-start space-x-2 rtl:space-x-reverse",children:[(0,a.jsx)(Q.Z,{className:"h-5 w-5 text-green-600 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"text-sm text-green-700 dark:text-green-300",children:[(0,a.jsx)("p",{className:"font-medium mb-1",children:"ar"===r?"متطلبات كلمة المرور:":"Password Requirements:"}),(0,a.jsxs)("ul",{className:"text-xs space-y-1",children:[(0,a.jsxs)("li",{children:["• ","ar"===r?"على الأقل 8 أحرف":"At least 8 characters"]}),(0,a.jsxs)("li",{children:["• ","ar"===r?"تحتوي على أحرف وأرقام":"Contains letters and numbers"]}),(0,a.jsxs)("li",{children:["• ","ar"===r?"تجنب المعلومات الشخصية":"Avoid personal information"]})]})]})]})})]}),"success"===i&&(0,a.jsxs)("div",{className:"space-y-6 text-center",children:[(0,a.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-green-100 dark:bg-green-900 mb-4",children:(0,a.jsx)(f.Z,{className:"h-8 w-8 text-green-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-foreground mb-2",children:"ar"===r?"تم بنجاح!":"Success!"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"ar"===r?"تم تحديث كلمة المرور بنجاح. سيتم توجيهك لتسجيل الدخول.":"Password updated successfully. You will be redirected to login."})]}),(0,a.jsx)("div",{className:"animate-pulse",children:(0,a.jsx)("div",{className:"w-8 h-8 bg-primary-600 rounded-full mx-auto"})}),(0,a.jsx)("div",{className:"p-4 bg-green-50 dark:bg-green-950 border border-green-200 dark:border-green-800 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-start space-x-2 rtl:space-x-reverse",children:[(0,a.jsx)(f.Z,{className:"h-5 w-5 text-green-600 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"text-sm text-green-700 dark:text-green-300",children:[(0,a.jsx)("p",{className:"font-medium mb-1",children:"ar"===r?"تم تسجيل العملية:":"Operation Logged:"}),(0,a.jsx)("p",{className:"text-xs",children:"ar"===r?"تم تسجيل عملية استعادة كلمة المرور في سجلات الأمان.":"Password recovery operation has been logged in security records."})]})]})})]})]})})})}var ex=t(20357);let eg={sessionDuration:parseInt(ex.env.NEXT_PUBLIC_ADMIN_SESSION_DURATION||"3600000"),maxLoginAttempts:parseInt(ex.env.NEXT_PUBLIC_MAX_LOGIN_ATTEMPTS||"5"),lockoutDuration:parseInt(ex.env.NEXT_PUBLIC_LOCKOUT_DURATION||"900000"),salt:ex.env.NEXT_PUBLIC_AUTH_SALT||"color_testing_salt_2025"},eu={ADMIN_SESSION:"ct_admin_session",LOGIN_ATTEMPTS:"ct_login_attempts",LOCKOUT_TIME:"ct_lockout_time"};async function eh(e){let r=new TextEncoder().encode(e);return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",r))).map(e=>e.toString(16).padStart(2,"0")).join("")}async function ep(e){return await eh(e+eg.salt)}function ey(){let e=localStorage.getItem(eu.LOGIN_ATTEMPTS);return e?parseInt(e):0}async function eb(e){let r=ex.env.NEXT_PUBLIC_ADMIN_PASSWORD_HASH;if(!r){let r=await ep("ColorTest2025!Admin");return await ep(e)===r}return await ep(e)===r}function ef(){localStorage.removeItem(eu.ADMIN_SESSION)}var ej=t(20357);function ev(e){let{lang:r}=e,[t,c]=(0,s.useState)(!1),[m,x]=(0,s.useState)(!0),[g,u]=(0,s.useState)(""),[h,p]=(0,s.useState)(!1),[y,b]=(0,s.useState)(!1),{user:f,isAdmin:v}=(0,i.a)(),N=(0,l.useRouter)(),w=(0,n.nZ)(r),k=parseInt(ej.env.NEXT_PUBLIC_MAX_LOGIN_ATTEMPTS||"5");(0,s.useEffect)(()=>{if(f&&v||function(){try{let e=localStorage.getItem(eu.ADMIN_SESSION);if(!e)return!1;let r=JSON.parse(e),t=Date.now();if(r.expires<t||r.userAgent!==navigator.userAgent)return ef(),!1;return!0===r.authenticated}catch(e){return ef(),!1}}()){c(!0),x(!1);return}p(!0),x(!1)},[f,v]);let _=async e=>{if(function(){let e=localStorage.getItem(eu.LOCKOUT_TIME);if(!e)return!1;let r=parseInt(e);return Date.now()<r||(localStorage.removeItem(eu.LOCKOUT_TIME),localStorage.removeItem(eu.LOGIN_ATTEMPTS),!1)}()){let e=function(){let e=localStorage.getItem(eu.LOCKOUT_TIME);return e?Math.ceil(Math.max(0,parseInt(e)-Date.now())/6e4):0}();G.ZP.error("ar"===r?"الحساب مقفل. المحاولة مرة أخرى خلال ".concat(e," دقيقة"):"Account locked. Try again in ".concat(e," minutes"));return}try{if(await eb(e))!function(){let e={token:function(){let e=new Uint8Array(32);return crypto.getRandomValues(e),Array.from(e,e=>e.toString(16).padStart(2,"0")).join("")}(),authenticated:!0,expires:Date.now()+eg.sessionDuration,timestamp:Date.now(),userAgent:navigator.userAgent};localStorage.setItem(eu.ADMIN_SESSION,JSON.stringify(e)),localStorage.removeItem(eu.LOGIN_ATTEMPTS),localStorage.removeItem(eu.LOCKOUT_TIME)}(),c(!0),p(!1),G.ZP.success("ar"===r?"تم تسجيل الدخول بنجاح":"Successfully logged in");else{!function(){let e=ey()+1;if(localStorage.setItem(eu.LOGIN_ATTEMPTS,e.toString()),e>=eg.maxLoginAttempts){let e=Date.now()+eg.lockoutDuration;localStorage.setItem(eu.LOCKOUT_TIME,e.toString())}}();let e=ey();e>=k?G.ZP.error("ar"===r?"تم قفل الحساب بسبب المحاولات المتعددة":"Account locked due to multiple failed attempts"):G.ZP.error("ar"===r?"كلمة مرور خاطئة. المحاولات المتبقية: ".concat(k-e):"Invalid password. Attempts remaining: ".concat(k-e))}}catch(e){G.ZP.error("ar"===r?"خطأ في التحقق من كلمة المرور":"Password validation error")}};return m?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)(d.T,{size:"lg"})}):y?(0,a.jsx)(em,{lang:r,onBack:()=>b(!1),onRecoverySuccess:e=>{b(!1),p(!0),G.ZP.success("ar"===r?"تم تحديث كلمة المرور بنجاح":"Password updated successfully")}}):h&&!t?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 via-white to-secondary-50 dark:from-primary-950 dark:via-gray-900 dark:to-secondary-950 flex items-center justify-center",children:(0,a.jsx)("div",{className:"max-w-md w-full mx-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-gray-300 shadow-lg p-8 dark:bg-gray-800 dark:border-gray-600",children:[(0,a.jsxs)("div",{className:"text-center mb-6",children:[(0,a.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-primary-100 dark:bg-primary-900 mb-4",children:(0,a.jsx)(er.Z,{className:"h-8 w-8 text-primary-600"})}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"ar"===r?"دخول المدير":"Admin Access"}),(0,a.jsx)("p",{className:"text-gray-500",children:"ar"===r?"أدخل كلمة مرور المدير للوصول إلى لوحة التحكم":"Enter admin password to access the control panel"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("input",{type:"password",placeholder:"ar"===r?"كلمة مرور المدير":"Admin password",value:g,onChange:e=>u(e.target.value),onKeyPress:e=>"Enter"===e.key&&_(g),className:"w-full px-4 py-3 rounded-lg border border-gray-300 bg-white focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100",autoFocus:!0}),(0,a.jsx)(o.z,{onClick:()=>_(g),className:"w-full",disabled:!g,children:"ar"===r?"دخول":"Login"}),(0,a.jsx)(o.z,{variant:"ghost",onClick:()=>N.push("/".concat(r)),className:"w-full",children:"ar"===r?"العودة للرئيسية":"Back to Home"}),(0,a.jsx)(o.z,{variant:"ghost",onClick:()=>b(!0),className:"w-full text-primary-600 hover:text-primary-700",children:"ar"===r?"نسيت كلمة المرور؟":"Forgot Password?"})]}),(0,a.jsx)("div",{className:"mt-6 p-4 bg-info-50 dark:bg-info-950 border border-info-200 dark:border-info-800 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-start space-x-2 rtl:space-x-reverse",children:[(0,a.jsx)(j.Z,{className:"h-5 w-5 text-info-600 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"text-sm text-info-700 dark:text-info-300",children:[(0,a.jsx)("p",{className:"font-medium mb-1",children:"ar"===r?"ملاحظة أمنية:":"Security Notice:"}),(0,a.jsx)("p",{className:"text-xs",children:"ar"===r?"هذه منطقة محمية. يتم تسجيل جميع محاولات الدخول.":"This is a protected area. All access attempts are logged."})]})]})})]})})}):t||v?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 via-white to-secondary-50 dark:from-primary-950 dark:via-gray-900 dark:to-secondary-950",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4 rtl:space-x-reverse",children:[(0,a.jsx)("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-primary-100 dark:bg-primary-900",children:(0,a.jsx)(Q.Z,{className:"h-6 w-6 text-primary-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:w("admin.title")}),(0,a.jsx)("p",{className:"text-gray-500",children:"ar"===r?"إدارة نظام اختبارات الألوان":"Color Testing System Management"})]})]}),(0,a.jsx)(o.z,{variant:"outline",onClick:()=>{ef(),c(!1),N.push("/".concat(r)),G.ZP.success("ar"===r?"تم تسجيل الخروج":"Logged out successfully")},children:"ar"===r?"تسجيل الخروج":"Logout"})]})}),(0,a.jsx)($,{lang:r})]})}):(0,a.jsx)(ea,{lang:r,onLogin:_})}},41982:function(e,r,t){"use strict";t.d(r,{Providers:function(){return u},a:function(){return i}});var a=t(57437),s=t(2265),l=t(85169);let n=(0,s.createContext)(void 0);function i(){let e=(0,s.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}let o=(0,s.createContext)(void 0),d="color_testing_user",c="color_testing_users",m={email:"admin@colortest.com",password:"admin123"};function x(e){let{children:r}=e,[t,l]=(0,s.useState)(null),[i,o]=(0,s.useState)(!0);(0,s.useEffect)(()=>{let e=localStorage.getItem(d);if(e)try{l(JSON.parse(e))}catch(e){console.error("Error loading user:",e)}o(!1)},[]);let x=()=>Date.now().toString(36)+Math.random().toString(36).substr(2),g=()=>{let e=localStorage.getItem(c);return e?JSON.parse(e):[]},u=e=>{localStorage.setItem(c,JSON.stringify(e))},h=async(e,r)=>{o(!0);try{if(e===m.email&&r===m.password){let e={id:"admin-001",email:m.email,full_name:"System Administrator",role:"admin",preferred_language:"ar",created_at:new Date().toISOString()};l(e),localStorage.setItem(d,JSON.stringify(e)),o(!1);return}let t=g().find(t=>t.email===e&&t.password===r);if(t)l(t.user),localStorage.setItem(d,JSON.stringify(t.user));else throw Error("Invalid email or password")}catch(e){throw e}finally{o(!1)}},p=async(e,r,t)=>{o(!0);try{let a=g();if(a.find(r=>r.email===e))throw Error("User already exists");let s={id:x(),email:e,full_name:t,role:"user",preferred_language:"ar",created_at:new Date().toISOString()};a.push({email:e,password:r,user:s}),u(a),l(s),localStorage.setItem(d,JSON.stringify(s))}catch(e){throw e}finally{o(!1)}},y=async()=>{l(null),localStorage.removeItem(d)},b=async()=>{let e=localStorage.getItem(d);e&&l(JSON.parse(e))},f=(null==t?void 0:t.role)==="admin"||(null==t?void 0:t.role)==="super_admin";return(0,a.jsx)(n.Provider,{value:{user:t,loading:i,isAdmin:f,signIn:h,signUp:p,signOut:y,refreshUser:b},children:r})}function g(e){let{children:r,initialLanguage:t="ar"}=e,[l,n]=(0,s.useState)(t),i=e=>{n(e),document.documentElement.lang=e,document.documentElement.dir="ar"===e?"rtl":"ltr",document.body.className=document.body.className.replace(/font-(arabic|english)/g,"font-".concat("ar"===e?"arabic":"english")),localStorage.setItem("preferred-language",e)};return(0,s.useEffect)(()=>{let e=localStorage.getItem("preferred-language");e&&["ar","en"].includes(e)&&i(e)},[]),(0,a.jsx)(o.Provider,{value:{language:l,setLanguage:i,direction:"ar"===l?"rtl":"ltr"},children:r})}function u(e){let{children:r}=e;return(0,a.jsx)(l.f,{attribute:"class",defaultTheme:"light",enableSystem:!0,disableTransitionOnChange:!0,children:(0,a.jsx)(x,{children:(0,a.jsx)(g,{children:r})})})}}},function(e){e.O(0,[358,990,425,505,868,609,695,758,772,673,971,23,744],function(){return e(e.s=30285)}),_N_E=e.O()}]);